var Ke=Object.defineProperty,Ze=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var De=(e,t,n)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F=(e,t)=>{for(var n in t||(t={}))$e.call(t,n)&&De(e,n,t[n]);if(de)for(var n of de(t))Ee.call(t,n)&&De(e,n,t[n]);return e},Z=(e,t)=>Ze(e,Je(t));var xe=(e,t)=>{var n={};for(var a in e)$e.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&de)for(var a of de(e))t.indexOf(a)<0&&Ee.call(e,a)&&(n[a]=e[a]);return n};import{r as N,o as _,c as S,a as I,w as ue,b as d,F as Me,d as Ue,e as le,f as V,p as X,g as K,t as w,h as J,n as se,i as R,j as Ve,L as Te,k as qe,R as Pe,I as Ae,l as pe,m as fe,q as ze,s as ne,v as Ie,u as Q,x as Ce,P as et,y as tt,z as nt,A as je,B as Le,C as ot,D as at,E as it,G as rt}from"./vendor.04b2ad9c.js";const st=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};st();var q=(e,t)=>{const n=e.__vccOpts||e;for(const[a,o]of t)n[a]=o;return n};const lt={},ct={id:"app"};function dt(e,t){const n=N("router-view");return _(),S("div",ct,[I(n)])}var ut=q(lt,[["render",dt]]);const pt="modulepreload",Ge={},ft="/2022-governance-index/",Se=function(t,n){return!n||n.length===0?t():Promise.all(n.map(a=>{if(a=`${ft}${a}`,a in Ge)return;Ge[a]=!0;const o=a.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${i}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":pt,o||(r.as="script",r.crossOrigin=""),r.href=a,document.head.appendChild(r),o)return new Promise((l,s)=>{r.addEventListener("load",l),r.addEventListener("error",s)})})).then(()=>t())},mt=["ARM","AZE","BLR","EST","KAZ","LTU","LVA","MDA","RUS","UKR"],we=["AGO","BFA","BWA","CIV","CMR","COD","COG","DZA","EGY","ETH","GAB","GHA","GIN","GMB","GNB","KEN","LBR","LBY","MAR","MDG","MLI","MOZ","MWI","NAM","NER","NGA","SDN","SEN","SLE","SOM","TGO","TUN","TZA","UGA","ZAF","ZMB","ZWE"],ie=[{name:"Madagascar: A Path Back From the Brink?",shortName:"Madagascar",description:"Madagascar, one of the world\u2019s poorest countries, has long trailed behind the global average in both Quality of Governance and Quality of Democracy, but it may be bucking this trend. Since the political crisis of 2009-2013, it has improved substantially in both indices.",steps:[{x:"qod",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2019,2019],filteredCountries:null,selectedCountry:"MDG",beatDescription:"To understand how this site works, it is helpful to begin with a country that scored very low on all of our major indices: Madagascar\u2019s Quality of Democracy and Quality of Government used to be much lower than the Quality of Democracy and Quality of Government of most countries in the dataset."},{x:"qod",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2010,2019],filteredCountries:["MDG"],beatDescription:"If we visualize changes over time, however, we can see how Madagascar improved: it moved to the right as its Quality of Democracy increased, and up as its Quality of Government increased."},{x:"qog",y:"qol",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2010,2018],filteredCountries:["MDG"],beatDescription:"After changing indices, we see that Madagascar\u2019s Quality of Life increased along with its Quality of Government. Madagascar appears to be on a path towards better governance."},{x:"qog",y:"qol",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2010,2019],filteredCountries:["MDG","SDN","SLE"],beatDescription:"In Africa, Madagascar is not the only country on a path towards better governance. When we add countries like Sudan and Sierra Leone, we see similar improvements in the Quality of Government and the Quality of Life."},{x:"qog",y:"qol",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2010,2019],filteredCountries:["MDG","SDN","SLE"],beatDescription:"All these increases are now under threat, however, as the region grapples with the consequences of vaccine nationalism, looming debt crises, and the war in Ukraine."}]},{name:"The United States: A Falling Star?",shortName:"United States",description:"The United States\u2013a leader in economic, military, and cultural power and one of the world\u2019s oldest democracies\u2013has not seen democratic and governmental improvements to match its global stature.",steps:[{x:"qod",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2019,2019],filteredCountries:null,selectedCountry:"USA",beatDescription:"If we view a one-time snapshot of our indices, it appears that the United States is doing well. Both its Quality of Democracy and Quality of Government scores are above the global average."},{x:"qod",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2010,2019],filteredCountries:["USA"],selectedCountry:"USA",beatDescription:"Yet if we explore the development of the Quality of Democracy and Quality of Government indices over time, it becomes clear that the United States has been on a clear, downwards trajectory. In fact, even as the US has progressed slightly on Quality of Life, it has seen a decline both in the Quality of Democracy and the Quality of Government, moving closer to the global average."},{x:"qod",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2010,2019],filteredCountries:["CAN","DEU","USA"],selectedCountry:null,beatDescription:"A comparison between the United States, Canada, and Germany shows results that are consistent with the idea of a relatively severe decline in the United States\u2019 Quality of Democracy and Quality of Government."},{x:"qog",y:"qol",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2010,2019],filteredCountries:["CAN","DEU","USA"],selectedCountry:null,beatDescription:"Finally, a closer look at the relationship between Quality of Government and Quality of Life reveals that the United States has not been able to deliver substantial Quality of Life improvements. The United States, Canada, and Germany have seen only limited improvements."}]},{name:"The Baltics: A Post-Soviet Success Story",shortName:"The Baltics",description:"",steps:[{x:"qol",y:"qod",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2e3],filteredCountries:mt,selectedCountry:null,beatDescription:"Following the dissolution of the Soviet Union in 1991, many of the constituent republics experienced severe economic and political turmoil. GDP per capita dropped in many countries and the rise of liberal democracy was not as rapid as some had hoped."},{x:"qol",y:"qod",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:["LVA","LTU","EST"],selectedCountry:null,beatDescription:"In the 21st century, however, there were some signs of success. For the three Baltic countries\u2013Latvia, Lithuania, and Estonia\u2013Quality of Democracy scores ranged between 82 and 90 in 2000, rising to between 85 and 93 in 2019."},{x:"qol",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:["LVA","LTU","EST"],selectedCountry:null,beatDescription:"Quality of Government also saw significant increases. Averages across the three countries improved from between 61 to 67 in 2000 and 64 to 78 some two decades later."},{x:"qol",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:["LVA","LTU","EST"],selectedCountry:null,beatDescription:"While the Baltics offer the most promising example, across all three dimensions, other Eastern European countries have seen success in specific areas."},{x:"qol",y:"qod",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:["BLR","RUS"],selectedCountry:null,beatDescription:"Belarus, which shows accountability scores persistently well below the European average, has a pattern similar to Russia\u2019s, with mid-level state capacity scores and disproportionate levels of public goods provision. "}]},{name:"Africa: A Fragile Rise",shortName:"Africa",description:"",steps:[{x:"qol",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:["DZA","ZAF","MLI","MAR","BWA"],selectedCountry:null,beatDescription:"Starting from an initially low point, many African countries have seen substantial increases across all three indices in the last 20 years. Public goods provision is especially strong in both southern and northern countries, with central ones lagging."},{x:"qol",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:we,selectedCountry:null,beatDescription:"Indeed, the African continent has seen the greatest improvement in the last two decades and the ten most-improved countries are all in Africa."},{x:"qol",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:["NER","ETH","EGY"],selectedCountry:null,beatDescription:"With Africa\u2019s population projected to explode in the coming decades, these substantial Quality of Life improvements in large countries like Nigeria, Ethiopia, and Egypt are an encouraging sign."},{x:"qol",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:we,selectedCountry:null,beatDescription:"The recent global trends of rising borrowing costs, increasing fuel and food prices, and geopolitical instability threaten to turn into a \u201Cperfect storm,\u201D highlighting the importance of both steady improvement and resilience. "},{x:"qol",y:"qog",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:we,selectedCountry:null,beatDescription:"This indicates the fragile nature of developing countries navigating the \u201Cnarrow corridor\u201D of governance improvements. Although rapid rises are possible, so are steep drops. "}]},{name:"Democratic Liability: An Emerging Trend?",shortName:"Democratic Liability",description:"",steps:[{x:"qol",y:"qod",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:[],selectedCountry:null,beatDescription:"Looking within a single index, Quality of Government, we can also see important trends."},{x:"elecaccount",y:"socaccount",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:["PAK","ARE","ALB"],selectedCountry:null,beatDescription:"In many countries, we observe what we could call \u201Cdemocratic liability\u201D: Improvements in electoral accountability without improvements in societal accountability."},{x:"instaccount",y:"socaccount",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:["ARG","CHL","SOM"],selectedCountry:null,beatDescription:"We see another facet of this trend in some countries, as institutional accountability increases without societal accountability following."},{x:"instaccount",y:"socaccount",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:["BRA","BOL","VEN"],selectedCountry:null,beatDescription:"A drop across all three forms of accountability is a worrying trend in South America. Brazil, Bolivia, and Venezuela have seen drops across the board. "},{x:"fisccap",y:"coordcap",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2e3,2019],filteredCountries:["BRA","BOL","VEN"],selectedCountry:null,beatDescription:"This reveals an important facet of the BGI: sub-indicators do not all move in parallel and overall improvements in one index can mask backsliding in sub-components. These same three countries have seen improvements in fiscal capacity, even as coordination capacity has shrunk."}]}];var ht="/2022-governance-index/images/Berggruen_Logo_NOTAG_WHITE.png",gt="/2022-governance-index/images/ucla_logo_white.png";const vt={name:"HeaderComponent",props:{},data:function(){return{stories:ie}},computed:{},mounted:function(){},methods:{toggleAboutModal:function(){this.$store.commit("toggleAboutModal")},toggleExportModal:function(){this.$store.commit("toggleExportModal")},enterStoryMode(){this.$store.commit("story/setStoryMode",!0)}}},me=e=>(X("data-v-00418dd4"),e=e(),K(),e),yt={class:"header ph3"},bt=le('<h1 class="dib ma0 mv3" data-v-00418dd4><a href="https://www.berggruen.org/work/the-planetary/the-2022-berggruen-governance-index/" data-v-00418dd4><img src="'+ht+'" alt="Berggruen Institute" class="header-logo berggruen-logo" data-v-00418dd4></a></h1><h1 class="dib ma0 mv3" data-v-00418dd4><a href="https://governance.luskin.ucla.edu/" target="_blank" data-v-00418dd4><img src="'+gt+'" alt="UCLA" class="header-logo ucla-logo" data-v-00418dd4></a></h1>',2),_t=me(()=>d("h2",{class:"dib ma0 mv1 ml4 mr4"},"The 2022 Berggruen Governance Index",-1)),xt={class:"header-nav dib ma0 mv2 pl0 ml2 mr2"},wt=me(()=>d("li",{class:"dib mh2 pointer"},"Overview",-1)),At=me(()=>d("li",{class:"dib mh2 pointer"},"Explore",-1)),Ct=V(" Stories "),St=me(()=>d("svg",{style:{"margin-bottom":"0.125rem"},width:"12",height:"6",viewBox:"0 0 12 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[d("path",{d:"M1.99609 1L6.49609 5L10.9961 1",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),kt={class:"tooltip-container dn absolute tooltip"},Mt={class:"tooltip-contents"};function Dt(e,t,n,a,o,i){const r=N("router-link");return _(),S("section",yt,[bt,I(r,{to:{name:"LandingView"},style:{"text-decoration":"none"}},{default:ue(()=>[_t]),_:1}),d("ul",xt,[I(r,{to:{name:"LandingView"},style:{"text-decoration":"none"}},{default:ue(()=>[wt]),_:1}),I(r,{to:{name:"Explorer"},style:{"text-decoration":"none"}},{default:ue(()=>[At]),_:1}),d("li",{class:"dib mh2 pointer",onClick:t[0]||(t[0]=(...l)=>i.toggleAboutModal&&i.toggleAboutModal(...l))},"About"),d("li",{class:"dib mh2 pointer tooltip button relative",onClick:t[1]||(t[1]=(...l)=>i.enterStoryMode&&i.enterStoryMode(...l))},[Ct,St,d("span",kt,[d("div",Mt,[(_(!0),S(Me,null,Ue(e.stories,(l,s)=>(_(),S("button",{key:l.name},[I(r,{to:{name:"Explorer",params:{story:s}}},{default:ue(()=>[d("li",null,w(l.name),1)]),_:2},1032,["to"])]))),128))])])]),d("li",{class:"dib mh2 pointer",onClick:t[2]||(t[2]=(...l)=>i.toggleExportModal&&i.toggleExportModal(...l))},"Export Data")])])}var $t=q(vt,[["render",Dt],["__scopeId","data-v-00418dd4"]]);function Et(e){return e`# [Integration] Country Index History Line Chart`}function It(e,t){return e.select(new Map(t.map(n=>[n.name,n.scode])),{label:"country"})}function Lt(e){return e({label:"x index",value:"qol"})}function Gt(e){return e({label:"y index",value:"qod"})}function Nt(e){return e.form([e.range([2e3,2018],{step:1,value:2e3,label:"year min"}),e.range([2e3,2018],{step:1,value:2013,label:"year max"})])}function Rt(e){return e.range([325,600],{value:325,label:"width",step:1})}function Ot(e,t,n,a,o,i,r,l,s,c,p,g,h){const y={top:35,right:200,bottom:30,left:20},v={betweenGroups:30,beforeText:15,betweenLabels:25},f=3,m=6,u=1.5,x=11,D=e.create("svg").attr("width",t+y.left+y.right).attr("height",n+y.bottom+y.top).attr("font-family","Helvetica"),C=D.append("g").attr("transform",`translate(${y.left},${y.top})`),L=e.scaleLinear().domain([1999.5,2018.5]).range([0,t]),b=e.scaleLinear().domain([0,100]).range([n,0]),A=e.axisBottom().scale(L).tickSize(4).tickSizeOuter(0).tickPadding(8).tickValues(e.range(2e3,2019)).tickFormat($=>+$%2==0?$:"");D.append("g").attr("transform",`translate(${y.left},${y.top+n})`).call(A).call($=>$.select(".domain").attr("stroke","#E9E9E9")).call($=>$.selectAll("line").attr("stroke","#E9E9E9"));const M=e.axisLeft().scale(b).tickSize(0).tickPadding(4).tickValues(e.range(0,101,25)).tickFormat(e.format("d"));D.append("g").attr("transform",`translate(${y.left},${y.top})`).call(M).call($=>$.select(".domain").attr("stroke","#E9E9E9")).call($=>$.selectAll("line").attr("stroke","#E9E9E9")),C.append("rect").attr("x",L(a[0])).attr("width",L(a[1])-L(a[0])).attr("y",b(100)).attr("height",b(0)).attr("stroke","none").attr("fill",o);const G=i.filter($=>$.country==r),O=e.line().curve(e.curveLinear);let P=new Array;G.forEach($=>{P.push([L($.year),b($[l])])});const z=O(P);C.append("path").attr("d",z).attr("fill","none").attr("stroke",s).attr("stroke-width",u),P.forEach($=>{C.append("circle").attr("cx",$[0]).attr("cy",$[1]).attr("r",f).attr("fill",s).attr("stroke","none")});let U=new Array;G.forEach($=>{U.push([L($.year),b($[c])])});const Y=O(U);C.append("path").attr("d",Y).attr("fill","none").attr("stroke",p).attr("stroke-width",u),U.forEach($=>{C.append("circle").attr("cx",$[0]).attr("cy",$[1]).attr("r",f).attr("fill",p).attr("stroke","none")});const k=C.append("foreignObject").attr("width",t).attr("height",n).attr("class","tooltip-fo").attr("background",g).style("position","absolute").style("visibility","hidden").attr("font-size",x);let T=k.append("xhtml:div").style("display","flex").style("justify-content","left").style("align-items","center").append("xhtml:span").style("display","inline-block").style("background-color",g).style("padding","0 0.2em").style("border-radius","0.2em");C.selectAll("circle").on("mouseenter",function($){const ce=e.pointer($),be=$.target,_e=Math.round(b.invert(be.getAttribute("cy")),0);T.html(_e).style("z-index",1),e.select(".tooltip-fo").attr("transform",`translate(
          ${ce[0]},
          ${ce[1]-x*1.2}
        )`).style("visibility","visible")}).on("mouseleave",function($){k.style("visibility","hidden")});const j=D.append("g").attr("transform",`translate(${y.left+t+v.betweenGroups},${y.top})`).attr("font-weight",500).attr("font-style","normal").attr("font-size",12),ee=new Map(Array.from(h,$=>$.reverse())),te=j.append("g");te.append("circle").attr("r",m).attr("fill",s),te.append("text").attr("transform",`translate(${v.beforeText},0)`).attr("dominant-baseline","middle").text(ee.get(l));const H=j.append("g").attr("transform",`translate(0, ${v.betweenLabels})`);return H.append("circle").attr("r",m).attr("fill",p),H.append("text").attr("transform",`translate(${v.beforeText},0)`).attr("dominant-baseline","middle").text(ee.get(c)),D.node()}function Bt(e){return e`## Appendix`}function Ut(e){return e*120/325}function Vt(){return"#2E28BD"}function Tt(){return"#28BDBB"}function qt(){return"#E9E9E9"}function Pt(){return"#28BDBB30"}function zt(e){return e("bgi.csv").csv({typed:!0})}function jt(e){return e("countries.csv").csv({typed:!0})}function Ft(e){return new Map(Array.from(e.keys()).map(t=>[e.get(t),t]))}function Yt(){return new Map([["Quality of Democracy","qod"],["Institutional Accountability","instaccount"],["Electoral Accountability","elecaccount"],["Societal Accountability","socaccount"],["Quality of Government","qog"],["Fiscal Capacity","fisccap"],["Coordination Capacity","coordcap"],["Delivery Capacity","delivcap"],["Quality of Life","qol"],["Social Public Goods","socpubgoods"],["Economic Public Goods","econpubgoods"],["Environmental Public Goods","envpubgoods"]])}function Ht(e,t){return n=>e.select(t,F({},n))}function Qt(e,t){const n=e.module(),a=new Map([]);return n.builtin("FileAttachment",e.fileAttachments(o=>a.get(o))),n.variable(t()).define(["md"],Et),n.variable(t("viewof country")).define("viewof country",["Inputs","countries"],It),n.variable(t("country")).define("country",["Generators","viewof country"],(o,i)=>o.input(i)),n.variable(t("viewof x")).define("viewof x",["big3Native"],Lt),n.variable(t("x")).define("x",["Generators","viewof x"],(o,i)=>o.input(i)),n.variable(t("viewof y")).define("viewof y",["big3Native"],Gt),n.variable(t("y")).define("y",["Generators","viewof y"],(o,i)=>o.input(i)),n.variable(t("viewof years")).define("viewof years",["Inputs"],Nt),n.variable(t("years")).define("years",["Generators","viewof years"],(o,i)=>o.input(i)),n.variable(t("viewof width")).define("viewof width",["Inputs"],Rt),n.variable(t("width")).define("width",["Generators","viewof width"],(o,i)=>o.input(i)),n.variable(t("chart")).define("chart",["d3","width","height","years","bandColor","bgi","country","x","xColor","y","yColor","tooltipColor","big3"],Ot),n.variable(t()).define(["md"],Bt),n.variable(t("height")).define("height",["width"],Ut),n.variable(t("xColor")).define("xColor",Vt),n.variable(t("yColor")).define("yColor",Tt),n.variable(t("tooltipColor")).define("tooltipColor",qt),n.variable(t("bandColor")).define("bandColor",Pt),n.variable(t("bgi")).define("bgi",["FileAttachment"],zt),n.variable(t("countries")).define("countries",["FileAttachment"],jt),n.variable(t("big3LookupLabel")).define("big3LookupLabel",["big3"],Ft),n.variable(t("big3")).define("big3",Yt),n.variable(t("big3Native")).define("big3Native",["Inputs","big3"],Ht),n}const{mapState:Wt}=J("scatterplot"),Xt={name:"DataDrivenSentence",props:{countryData:Array,ranking:Object,metricDescriptionBlacklist:Array,selectedCountryName:String},data:function(){return{indexMap:this.$store.state.indexNameMap,xColor:"#006DB7",yColor:"#E44136"}},computed:Z(F({},Wt(["x","y","years","selectedCountry"])),{xScore:function(){return this.countryData.find(e=>e.year===this.years[0])[this.x]},yScore:function(){return this.countryData.find(e=>e.year===this.years[0])[this.y]},swing:function(){return this.calculateMetricSwing(this.countryData,this.years[0],this.years[1])},xMetricChange:function(){const e=this.x;return this.swing[e]>0?"an increase":"a decrease"},yMetricChange:function(){const e=this.y;return this.swing[e]>0?"an increase":"a decrease"},top10Metrics:function(){return Object.keys(this.ranking).filter(e=>this.ranking[e]<10).sort((e,t)=>this.ranking[e]-this.ranking[t])},top3SwingMetrics:function(){const e=this.swing,t=Object.keys(e).reduce((a,o)=>(a[o]=e[o],a),{});return Object.keys(t).sort((a,o)=>t[o]-t[a]).slice(0,3)}}),mounted:function(){},methods:{classifyChange(e){const t=e>0,n=Math.abs(e),a=n<2,o=n>2&&n<9,i=n>=9;if(a)return t?"a slight increase":"a slight decrease";if(o)return t?"an increase":"a decrease";if(i)return t?"a pronounced increase":"a pronounced decrease"},indexNameMap(e){const t=this.indexMap[e];return t||e},calculateMetricSwing(e,t,n){const a=this.metricDescriptionBlacklist;if(!e.length)return null;const o=Object.keys(e[0]).filter(p=>!a.includes(p)),i=e.filter(p=>p.year>=t&&p.year<=n).sort((p,g)=>p.year-g.year),r=o.map(p=>i[0][p]),l=o.map(p=>i[i.length-1][p]),s=o.map((p,g)=>r[g]-l[g]);return o.reduce((p,g,h)=>(p[g]=-s[h].toFixed(2),p),{})}}},Kt={key:0},Zt={key:0},Jt={key:1},en={class:"o-80 courier f7"},tn={class:"o-80 courier f7"},nn={key:2},on={key:3},an={class:"o-70 f7"},rn={key:0},sn=V(", "),ln={key:0};function cn(e,t,n,a,o,i){return e.selectedCountry!==null&&i.swing?(_(),S("section",Kt,[e.years[0]===e.years[1]?(_(),S("p",Zt,[d("span",null,[V(" Looking at "+w(n.selectedCountryName)+" in "+w(e.years[0])+" on the ",1),d("span",{class:"ph2 white br2 b word-nowrap nowrap",style:se({backgroundColor:e.xColor})},"x axis \u2B62",4),V(" "+w(i.indexNameMap(e.x))+" is "+w(i.xScore)+" and on the ",1),d("span",{class:"ph2 white br2 b word-nowrap nowrap",style:se({backgroundColor:e.yColor})},"y axis \u2B61",4),V(" "+w(i.indexNameMap(e.y))+" is "+w(i.yScore)+". ",1)])])):R("",!0),e.years[0]!==e.years[1]?(_(),S("p",Jt,[d("span",null," Looking at "+w(n.selectedCountryName)+" between "+w(e.years[0])+" and "+w(e.years[1])+", we see the ",1),d("span",{class:"ph2 white br2 b word-nowrap nowrap",style:se({backgroundColor:e.xColor})},"x axis \u2B62",4),V(" shows "+w(i.classifyChange(i.swing[e.x]))+" ",1),d("span",en,"("+w(i.swing[e.x])+"%)",1),V(" in "+w(i.indexNameMap(e.x))+" and the ",1),d("span",{class:"ph2 white br2 b word-nowrap nowrap",style:se({backgroundColor:e.yColor})},"y axis \u2B61",4),V(" shows a "+w(i.classifyChange(i.swing[e.y]))+" ",1),d("span",tn,"("+w(i.swing[e.y])+"%)",1),V(" in "+w(i.indexNameMap(e.y))+". ",1)])):R("",!0),i.top10Metrics.length===0?(_(),S("p",nn)):R("",!0),i.top10Metrics.length>0?(_(),S("p",on,[V(w(e.selectedCountry)+" is top 10 in ",1),(_(!0),S(Me,null,Ue(i.top10Metrics,(r,l)=>(_(),S("span",{key:`metric-list-${r}`},[V(w(i.indexNameMap(r))+" ",1),d("span",an,"(#"+w(n.ranking[r])+")",1),l!==i.top10Metrics.length-1&&i.top10Metrics.length>=2?(_(),S("span",rn,[sn,i.top10Metrics.length>1&&l===i.top10Metrics.length-2?(_(),S("span",ln,"and ")):R("",!0)])):R("",!0)]))),128)),d("p",null," The most change occurred in "+w(i.indexNameMap(i.top3SwingMetrics[0]))+", "+w(i.indexNameMap(i.top3SwingMetrics[1]))+" and "+w(i.indexNameMap(i.top3SwingMetrics[2]))+". ",1)])):R("",!0)])):R("",!0)}var dn=q(Xt,[["render",cn]]);const Ne=Ve(null),{mapState:Re}=J("scatterplot"),Oe=["country","population","year","gdp_capita","interstate_conflict","civil_war"],un={name:"InfoBoxComponent",computed:Z(F(F({},Re(["x","y","years","selectedCountry","balance"])),Re({selectedCountries:e=>e.countries})),{bgiFilteredToSelectedCountry:function(){if(!this.bgi||!this.selectedCountry)return[];const e=this.bgi,t=this.selectedCountry;return e.filter(a=>a.country===t)},bgiRankingForSelectedCountry:function(){if(!this.bgi||!this.selectedCountry)return[];const e=Object.keys(this.bgi[0]),t=this.bgi.filter(a=>a.year===this.years[1]),n={};return e.forEach(a=>{if(Oe.includes(a))return;const r=t.sort((l,s)=>s[a]-l[a]).findIndex(l=>l.country===this.selectedCountry);n[a]=r+1}),n}}),data:function(){return{countries:null,bgi:null,METRIC_DESCRIPTION_BLACKLIST:Oe,previousCountry:null,nextCountry:null}},methods:{redefine:function(e,t){Ne._rawValue.redefine(e,t)},getCountryName:function(e){if(!this.countries||!e)return"";let t=this.countries.filter(n=>n.scode===e);return t[0]?t[0].name:""},getPreviousCountry:function(){const e=this.selectedCountries||this.countries.map(i=>i.scode),t=this.selectedCountry;let n=Object.values(e).sort(),a=n.indexOf(t),o;return e.length>2?a==0?o=n[n.length-1]:o=n[a-1]:e.length>1?a==0?o=null:o=n[a-1]:o=null,o},getNextCountry:function(){const e=this.selectedCountries||this.countries.map(i=>i.scode),t=this.selectedCountry;let n=Object.values(e).sort(),a=n.indexOf(t),o;return e.length>2?a==e.length-1?o=n[0]:o=n[a+1]:e.length>1?a==e.length-1?o=null:o=n[a+1]:o=null,o},goToPrevious:function(){this.$store.commit("scatterplot/setSelectedCountry",this.previousCountry)},goToNext:function(){this.$store.commit("scatterplot/setSelectedCountry",this.nextCountry)}},components:{DataDrivenSentence:dn},mounted:function(){const e=Object.assign(new Te,{d3:qe}),t=new Pe(e);Ne.value=t.module(Qt,n=>{if(n==="chart")return new Ae(this.$refs.chart)}),pe("./data/countries.2022-04-18.csv",fe).then(n=>{this.redefine("countries",n),this.countries=n}),this.redefine("bgi",[]),pe("./data/bgi.2022-04-18.csv",fe).then(n=>{this.redefine("bgi",n),this.bgi=n}),this.redefine("x",this.x),this.redefine("y",this.y),this.redefine("years",this.years),this.redefine("xColor","#006DB7"),this.redefine("yColor","#E44136"),this.redefine("bandColor","rgba(0, 109, 183, .15)"),this.redefine("country",this.$store.state.scatterplot.selectedCountry)},watch:{selectedCountry:function(e){this.redefine("country",e),this.previousCountry=this.getPreviousCountry(),this.nextCountry=this.getNextCountry()},x:function(e){this.redefine("x",e)},y:function(e){this.redefine("y",e)},years:function(e){this.redefine("years",e)},selectedCountries:function(e){this.$store.commit("scatterplot/setSelectedCountry",this.previousCountry||this.nextCountry||e[0]||"USA"),this.selectedCountries=e,this.previousCountry=this.getPreviousCountry(),this.nextCountry=this.getNextCountry()}}},Fe=e=>(X("data-v-5799e1c6"),e=e(),K(),e),pn={class:"br3 bg-white w-100"},fn={class:"infobox-header"},mn={class:"country-nav previous-country"},hn=Fe(()=>d("span",{class:"material-icons-round"}," west ",-1)),gn={class:"country-nav selected-country-name"},vn={key:0},yn={class:"country-nav next-country"},bn=Fe(()=>d("span",{class:"material-icons-round"}," east ",-1)),_n={class:"infobox-body"},xn={class:"sentences w-third info-block"},wn={class:"sentence-text"};function An(e,t,n,a,o,i){const r=N("DataDrivenSentence");return _(),S("div",pn,[d("div",fn,[d("div",mn,[e.previousCountry!==null?(_(),S("button",{key:0,type:"button",onClick:t[0]||(t[0]=(...l)=>i.goToPrevious&&i.goToPrevious(...l))},[hn,V(" "+w(i.getCountryName(e.previousCountry)),1)])):R("",!0)]),d("div",gn,[e.selectedCountry!==null?(_(),S("div",vn,w(i.getCountryName(e.selectedCountry).toUpperCase()),1)):R("",!0)]),d("div",yn,[e.nextCountry!==null?(_(),S("button",{key:0,type:"button",onClick:t[1]||(t[1]=(...l)=>i.goToNext&&i.goToNext(...l))},[V(w(i.getCountryName(e.nextCountry))+" ",1),bn])):R("",!0)])]),d("div",_n,[d("div",xn,[d("div",wn,[I(r,{selectedCountryName:`${i.getCountryName(e.selectedCountry)}`,countryData:i.bgiFilteredToSelectedCountry,ranking:i.bgiRankingForSelectedCountry,metricDescriptionBlacklist:e.METRIC_DESCRIPTION_BLACKLIST},null,8,["selectedCountryName","countryData","ranking","metricDescriptionBlacklist"])])]),d("div",{ref:"chart",class:ze(["w-two-thirds info-block",{dn:e.selectedCountry===null}])},null,2)])])}var Cn=q(un,[["render",An],["__scopeId","data-v-5799e1c6"]]);const Ye={qod:"Quality of Democracy",instaccount:"Institutional Accountability",elecaccount:"Electoral Accountability",socaccount:"Societal Accountability",qog:"Quality of Government",fisccap:"Fiscal Capacity",coordcap:"Coordination Capacity",delivcap:"Delivery Capacity",qol:"Quality of Life",soclife:"Health and Human Development",econlife:"Poverty, Hunger, and Inequality Reduction",envlife:"Climate, Environment, and Energy Resilience"},he=Z(F({},Ye),{uncertainty:"World Uncertainty Index",trust:"Interpersonal Trust",confgov:"Confidence in the Government",population:"Population",gdp_capita:"GDP per Capita",gdp_growth:"GDP Growth",inflation:"Inflation",balance:"Current Account Balance",regime:"Regimes of the World",globalization:"Globalization Index",civil_war:"Civil War",interstate_conflict:"Interstate Armed Conflict"}),He={qod:"The ability of citizens to check governmental power and demand justifications for the state\u2019s actions through electoral, institutional, and societal means. ",instaccount:"Checks and balances between institutions, including the ability to request information, question officials, and punish infractions through courts, the legislature, or special oversight authorities. ",elecaccount:"The ability of citizens to hold governments accountable through elections, including organization in political parties and participation in free and fair elections. ",socaccount:"The extent to which civil society organizations and the media are able to hold the government accountable, including through street-level mobilization and investigative journalism. ",qog:"The ability of the government to achieve its primary goals, such as generating revenue, organizing collective action, and delivering on its policies. ",fisccap:"The state\u2019s ability to muster financial resources through levying taxation, holding central bank reserves, and limiting interest payments. ",coordcap:"The ability of state institutions to organize collective action, including through establishing elite consensus and ensuring businesses are public-goods oriented. ",delivcap:"The state\u2019s ability to execute policies \u201Con the ground.\u201D This is developed through limited corruption, predictable enforcement, and effective resource allocation. ",qol:"The level at which the government provides public goods to citizens. Public goods are goods available to all, like health, education, and a clean environment. ",soclife:"Public goods that enable citizens to live a healthy life and to acquire a basic education. This includes gender equality, which serves as a basis for the equitable provision of these goods. ",econlife:"Public goods that facilitate economic growth, such as food security and productive knowledge. Economic resilience is also key, so measures like inequality and access to care are included. ",envlife:"Environmental public goods such as clean water, protected ecosystems, and affordable energy sources. "},Sn="See codebook for additional detail.",ke={qod:["instaccount","elecaccount","socaccount"],instaccount:[],elecaccount:[],socaccount:[],qog:["fisccap","coordcap","delivcap"],fisccap:[],coordcap:[],delivcap:[],qol:["soclife","econlife","envlife"],soclife:[],econlife:[],envlife:[]};const kn={name:"InfoIconComponent",components:{}},Mn={style:{display:"inline"}},Dn=le('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-51087dc1><g filter="url(#filter0_d_646_4473)" data-v-51087dc1><circle class="help-icon-circle" cx="16" cy="16" r="10" fill="#B3C3E4" data-v-51087dc1></circle><path d="M16 16L16 19.7255" stroke="white" stroke-width="2" stroke-linecap="round" data-v-51087dc1></path><circle cx="15.9996" cy="12.2745" r="1.24183" fill="white" data-v-51087dc1></circle></g><defs data-v-51087dc1><filter id="filter0_d_646_4473" x="0" y="0" width="32" height="32" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB" data-v-51087dc1><feFlood flood-opacity="0" result="BackgroundImageFix" data-v-51087dc1></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" data-v-51087dc1></feColorMatrix><feOffset data-v-51087dc1></feOffset><feGaussianBlur stdDeviation="3" data-v-51087dc1></feGaussianBlur><feComposite in2="hardAlpha" operator="out" data-v-51087dc1></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.701961 0 0 0 0 0.768627 0 0 0 0 0.898039 0 0 0 0.5 0" data-v-51087dc1></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_646_4473" data-v-51087dc1></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_646_4473" result="shape" data-v-51087dc1></feBlend></filter></defs></svg>',1),$n=[Dn];function En(e,t,n,a,o,i){return _(),S("div",Mn,$n)}var ge=q(kn,[["render",En],["__scopeId","data-v-51087dc1"]]);const In={name:"HelpPopupComponent",components:{},props:["content"],mounted:function(){}},Ln={class:"help-text"};function Gn(e,t,n,a,o,i){return _(),S("div",null,[d("div",Ln,w(n.content),1)])}var ve=q(In,[["render",Gn],["__scopeId","data-v-973c90a4"]]);const Nn={name:"IndexComponent",components:{InfoIconComponent:ge,HelpPopupComponent:ve},props:{title:String,indexValue:String,indexGroup:String,buttons:{type:Boolean,default:!1},xLabel:{type:String,default:""},yLabel:{type:String,default:""},isConflict:{type:Boolean,default:!1}},data:function(){return{indexMap:he,descriptionMap:He,codebookText:Sn,indexGroups:ke,popUpVisible:!1,showConflictX:!1,showConflictY:!1}},computed:{x:{get(){return this.$store.state.scatterplot.x},set(e){return this.$store.commit("scatterplot/setX",e)}},y:{get(){return this.$store.state.scatterplot.y},set(e){return this.$store.commit("scatterplot/setY",e)}}}},Qe=e=>(X("data-v-3286326a"),e=e(),K(),e),Rn={class:"index-item"},On={key:0,class:"label"},Bn={key:1},Un=["value","disabled"],Vn=Qe(()=>d("div",{class:"checkbox",tabindex:"0"},[d("div",{class:"empty"}),d("div",{class:"checkmark material-icons-round"},"check_box")],-1)),Tn={key:2,class:"label"},qn={key:3},Pn=["value","disabled"],zn=Qe(()=>d("div",{class:"checkbox",tabindex:"0"},[d("div",{class:"empty"}),d("div",{class:"checkmark material-icons-round"},"check_box")],-1)),jn={key:4},Fn={key:5,class:"index-name"},Yn={class:"icon-container"};function Hn(e,t,n,a,o,i){const r=N("HelpPopupComponent"),l=N("InfoIconComponent");return _(),S("div",Rn,[n.buttons?(_(),S("div",Bn,[d("label",{class:"square-radio",onMouseover:t[1]||(t[1]=s=>e.showConflictX=!0),onMouseleave:t[2]||(t[2]=s=>e.showConflictX=!1)},[ne(d("input",{type:"radio",name:"x",value:n.indexValue,"onUpdate:modelValue":t[0]||(t[0]=s=>i.x=s),disabled:i.y!=n.indexValue&&i.y==n.indexGroup||this.indexGroups[n.indexValue].includes(i.y)},null,8,Un),[[Ie,i.x]]),e.showConflictX?(_(),Q(r,{key:0,class:"conflict-popup",content:"An index cannot be selected for one axis if the same index or a sub-index is selected for the other axis."})):R("",!0),Vn],32)])):(_(),S("div",On,w(n.xLabel),1)),n.buttons?(_(),S("div",qn,[d("label",{class:"square-radio",onMouseover:t[4]||(t[4]=s=>e.showConflictY=!0),onMouseleave:t[5]||(t[5]=s=>e.showConflictY=!1)},[ne(d("input",{type:"radio",name:"y",value:n.indexValue,"onUpdate:modelValue":t[3]||(t[3]=s=>i.y=s),disabled:i.x!=n.indexValue&&i.x==n.indexGroup||this.indexGroups[n.indexValue].includes(i.x)},null,8,Pn),[[Ie,i.y]]),e.showConflictY?(_(),Q(r,{key:0,class:"conflict-popup",content:"An index cannot be selected for one axis if the same index or a sub-index is selected for the other axis."})):R("",!0),zn],32)])):(_(),S("div",Tn,w(n.yLabel),1)),n.title?(_(),S("div",jn,w(n.title),1)):(_(),S("div",Fn,w(this.indexMap[n.indexValue]),1)),d("div",Yn,[n.buttons?(_(),Q(l,{key:0,class:"small-icon",onMouseover:t[6]||(t[6]=s=>e.popUpVisible=!0),onMouseleave:t[7]||(t[7]=s=>e.popUpVisible=!1)})):R("",!0)]),e.popUpVisible?(_(),Q(r,{key:6,class:"small-popup",content:this.descriptionMap[n.indexValue]+e.codebookText},null,8,["content"])):R("",!0)])}var Qn=q(Nn,[["render",Hn],["__scopeId","data-v-3286326a"]]);const{mapGetters:Wn}=J("scatterplot"),Xn={name:"IndexSelectorComponent",components:{IndexComponent:Qn,InfoIconComponent:ge,HelpPopupComponent:ve},props:{},data:function(){return{isEditing:!1,mainIndexMap:Ye,popUpVisible:!1,helpText:"Select new  indices shown on the X and Y axis from the dropdown.       Select \u201CSwitch X and Y\u201D to switch the X and Y axes or select \u201Cshuffle\u201D       to randomly select new indices.",indexGroups:ke,storyModeWarning:!1,storyModeWarningLabel:'Inputs are disabled in story mode. Click "Exit story" at the bottom right to change inputs.'}},computed:Z(F({},Wn(["hasQodConflict","hasQogConflict","hasQolConflict"])),{x:{get(){return this.$store.state.scatterplot.x},set(e){return this.$store.commit("scatterplot/setX",e)}},y:{get(){return this.$store.state.scatterplot.y},set(e){return this.$store.commit("scatterplot/setY",e)}},storyMode:function(){return this.$store.state.story.storyMode},showAverageLines:{get(){return this.$store.state.scatterplot.showAverageLines},set(e){return this.$store.commit("scatterplot/setShowAverageLines",e)}}}),mounted:function(){},methods:{switchXY(){const e=this.$store.state.scatterplot.y,t=this.$store.state.scatterplot.x;this.$store.commit("scatterplot/setX",e),this.$store.commit("scatterplot/setY",t)},shuffle(){const e=Object.keys(this.mainIndexMap),t=e[Math.floor(Math.random()*e.length)];let n=[...e];n.splice(e.indexOf(t),1),["qol","qod","qog"].includes(t)?ke[t].forEach(o=>{n.splice(n.indexOf(o),1)}):["instaccount","elecaccount","socaccount"].includes(t)?n.splice(n.indexOf("qod"),1):["fisccap","coordcap","delivcap"].includes(t)?n.splice(n.indexOf("qog"),1):["socpubgoods","econpubgoods","envpubgoods"].includes(t)&&n.splice(n.indexOf("qol"),1);const a=n[Math.floor(Math.random()*n.length)];this.$store.commit("scatterplot/setX",t),this.$store.commit("scatterplot/setY",a)}}},oe=e=>(X("data-v-556cc209"),e=e(),K(),e),Kn={class:"component-header"},Zn={class:"flex items-center",style:{gap:"0.5rem"}},Jn=oe(()=>d("h4",null,"Indices",-1)),eo=["disabled"],to=["disabled"],no=oe(()=>d("div",{class:"x-label"},"X",-1)),oo=oe(()=>d("div",{class:"y-label"},"Y",-1)),ao=oe(()=>d("div",{class:"v-divider"},null,-1)),io={class:"selected-x"},ro={class:"selected-y"},so={style:{height:"100%",transform:"translate(-0.5rem, 1rem)"}},lo={class:"material-icons-round pointer"},co={key:0},uo=oe(()=>d("hr",{class:"h-divider"},null,-1)),po=oe(()=>d("hr",{class:"h-divider"},null,-1)),fo=oe(()=>d("hr",{class:"h-divider"},null,-1)),mo=["disabled"],ho=V(" Show global average lines for all countries ");function go(e,t,n,a,o,i){const r=N("InfoIconComponent"),l=N("HelpPopupComponent"),s=N("IndexComponent");return _(),S(Me,null,[d("div",Kn,[d("div",{class:"flex items-center justify-between w-100",onMouseover:t[4]||(t[4]=c=>e.storyModeWarning=i.storyMode),onMouseleave:t[5]||(t[5]=c=>e.storyModeWarning=!1)},[d("div",Zn,[Jn,I(r,{onMouseover:t[0]||(t[0]=c=>e.popUpVisible=!0),onMouseleave:t[1]||(t[1]=c=>e.popUpVisible=!1)}),e.popUpVisible?(_(),Q(l,{key:0,content:e.helpText},null,8,["content"])):R("",!0)]),d("div",null,[d("button",{onClick:t[2]||(t[2]=(...c)=>i.shuffle&&i.shuffle(...c)),class:"shuffle mr0",disabled:i.storyMode}," Shuffle ",8,eo),d("button",{onClick:t[3]||(t[3]=(...c)=>i.switchXY&&i.switchXY(...c)),class:"switch-x-y",disabled:i.storyMode}," Switch X and Y ",8,to)])],32)]),e.storyModeWarning?(_(),Q(l,{key:0,content:e.storyModeWarningLabel},null,8,["content"])):R("",!0),d("section",{class:"index-selector-section",onMouseover:t[7]||(t[7]=c=>e.storyModeWarning=i.storyMode),onMouseleave:t[8]||(t[8]=c=>e.storyModeWarning=!1)},[d("div",{class:"selector-header",onClick:t[6]||(t[6]=c=>e.isEditing=i.storyMode?!1:!e.isEditing)},[no,oo,ao,d("div",io,w(e.mainIndexMap[i.x]),1),d("div",ro,w(e.mainIndexMap[i.y]),1),d("div",so,[d("button",lo,w(e.isEditing?"keyboard_arrow_up":"keyboard_arrow_down"),1)])]),e.isEditing?(_(),S("div",co,[uo,I(s,{xLabel:"X",yLabel:"Y"}),I(s,{indexGroup:"qod",indexValue:"qod",buttons:!0,isConflict:e.hasQodConflict},null,8,["isConflict"]),I(s,{indexGroup:"qod",indexValue:"instaccount",buttons:!0}),I(s,{indexGroup:"qod",indexValue:"elecaccount",buttons:!0}),I(s,{indexGroup:"qod",indexValue:"socaccount",buttons:!0}),po,I(s,{indexGroup:"qog",indexValue:"qog",buttons:!0,isConflict:e.hasQogConflict},null,8,["isConflict"]),I(s,{indexGroup:"qog",indexValue:"fisccap",buttons:!0}),I(s,{indexGroup:"qog",indexValue:"coordcap",buttons:!0}),I(s,{indexGroup:"qog",indexValue:"delivcap",buttons:!0}),fo,I(s,{indexGroup:"qol",indexValue:"qol",buttons:!0,isConflict:e.hasQolConflict},null,8,["isConflict"]),I(s,{indexGroup:"qol",indexValue:"soclife",buttons:!0}),I(s,{indexGroup:"qol",indexValue:"econlife",buttons:!0}),I(s,{indexGroup:"qol",indexValue:"envlife",buttons:!0})])):R("",!0)],32),ne(d("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=c=>i.showAverageLines=c),disabled:i.storyMode},null,8,mo),[[Ce,i.showAverageLines]]),ho],64)}var vo=q(Xn,[["render",go],["__scopeId","data-v-556cc209"]]);const yo={data(){return{indexMap:he,descriptionMap:He}},computed:{x(){return this.$store.state.scatterplot.x},y(){return this.$store.state.scatterplot.y}}},bo={class:"index-descriptions"},_o={class:"description-container"},xo={class:"index-name"},wo={class:"description measure"},Ao={class:"description-container"},Co={class:"index-name"},So={class:"description measure"};function ko(e,t,n,a,o,i){return _(),S("div",bo,[d("div",_o,[d("span",xo,w(o.indexMap[i.x])+": ",1),d("span",wo,w(o.descriptionMap[i.x]),1)]),d("div",Ao,[d("span",Co,w(o.indexMap[i.y])+": ",1),d("span",So,w(o.descriptionMap[i.y]),1)])])}var Mo=q(yo,[["render",ko],["__scopeId","data-v-7adf0b00"]]);const Do={name:"ScopeSelectorComponent",components:{Slider:et,InfoIconComponent:ge,HelpPopupComponent:ve},props:{},data:function(){return{storyModeWarning:!1,storyModeWarningLabel:'Inputs are disabled in story mode. Click "Exit story" at the bottom right to change inputs.',popUpVisible:!1,helpText:"Move the sliders to adjust the X axis range, Y axis range,      and timeframe in the visualization. Check the \u201CScale to data\u201D boxes to       automatically scale the axis depending on the other parameters selected.       Select \u201CReset all\u201D to refresh all parameters."}},methods:{resetAll(){this.$store.commit("scatterplot/setXDomain",{value:[0,100]}),this.$store.commit("scatterplot/setYDomain",{value:[0,100]}),this.$store.commit("scatterplot/setYears",[2019])}},watch:{xDomain:function(e){this.$store.commit("scatterplot/setXDomain",{value:e})},yDomain:function(e){this.$store.commit("scatterplot/setYDomain",{value:e})}},computed:{storyMode:function(){return this.$store.state.story.storyMode},xDomainScaleToData:{get:function(){return this.$store.state.scatterplot.xDomain.value===void 0},set:function(e){this.$store.commit("scatterplot/setXDomain",{value:e?void 0:this.xDomainValue})}},xDomainValue:{get:function(){return this.$store.state.scatterplot.xDomain.value||[0,100]},set:function(e){this.$store.commit("scatterplot/setXDomain",{value:this.xDomainScaleToData?void 0:e})}},yDomainScaleToData:{get:function(){return this.$store.state.scatterplot.yDomain.value===void 0},set:function(e){this.$store.commit("scatterplot/setYDomain",{value:e?void 0:this.yDomainValue})}},yDomainValue:{get:function(){return this.$store.state.scatterplot.yDomain.value||[0,100]},set:function(e){this.$store.commit("scatterplot/setYDomain",{value:this.yDomainScaleToData?void 0:e})}},years:{get(){return this.$store.state.scatterplot.years},set(e){return this.$store.commit("scatterplot/setYears",e)}},showAverageLines:{get(){return this.$store.state.scatterplot.showAverageLines},set(e){return this.$store.commit("scatterplot/setShowAverageLines",e)}}}},re=e=>(X("data-v-af61c43a"),e=e(),K(),e),$o={class:"scope-selector"},Eo={class:"scope-header"},Io={style:{display:"flex","align-items":"center","grid-gap":"0.5rem"}},Lo=re(()=>d("h4",null,"Scope",-1)),Go=["disabled"],No={class:"scope"},Ro={class:"axis-range axis-range-x-slider"},Oo={class:"axis-range-x-slider-label"},Bo=re(()=>d("b",null,"X Axis Range",-1)),Uo=["disabled"],Vo=re(()=>d("label",{for:"scale-to-data"},"Scale to data",-1)),To=le('<div class="axis-range-scale" data-v-af61c43a><div data-v-af61c43a>0</div><div data-v-af61c43a>10</div><div data-v-af61c43a>20</div><div data-v-af61c43a>30</div><div data-v-af61c43a>40</div><div data-v-af61c43a>50</div><div data-v-af61c43a>60</div><div data-v-af61c43a>70</div><div data-v-af61c43a>80</div><div data-v-af61c43a>90</div><div data-v-af61c43a>100</div></div>',1),qo={class:"axis-range axis-range-y"},Po={class:"axis-range-y-slider-label"},zo=re(()=>d("b",null,"Y Axis Range",-1)),jo=re(()=>d("label",{for:"scale-to-data"},"Scale to data",-1)),Fo=le('<div class="axis-range-scale" data-v-af61c43a><div data-v-af61c43a>0</div><div data-v-af61c43a>10</div><div data-v-af61c43a>20</div><div data-v-af61c43a>30</div><div data-v-af61c43a>40</div><div data-v-af61c43a>50</div><div data-v-af61c43a>60</div><div data-v-af61c43a>70</div><div data-v-af61c43a>80</div><div data-v-af61c43a>90</div><div data-v-af61c43a>100</div></div>',1),Yo={key:0,class:"ml3"},Ho={key:1,class:"ml3"},Qo=re(()=>d("div",{class:"year-selection-scale"},[d("div",null,"2000"),d("div",null,"2019")],-1));function Wo(e,t,n,a,o,i){const r=N("InfoIconComponent"),l=N("HelpPopupComponent"),s=N("Slider");return _(),S("div",$o,[d("div",Eo,[d("div",Io,[Lo,I(r,{onMouseover:t[0]||(t[0]=c=>e.popUpVisible=!0),onMouseleave:t[1]||(t[1]=c=>e.popUpVisible=!1)}),e.storyModeWarning?(_(),Q(l,{key:0,content:e.storyModeWarningLabel},null,8,["content"])):R("",!0),e.popUpVisible?(_(),Q(l,{key:1,content:e.helpText},null,8,["content"])):R("",!0)]),d("button",{class:"reset-all",onClick:t[2]||(t[2]=(...c)=>i.resetAll&&i.resetAll(...c)),disabled:i.storyMode}," Reset all ",8,Go)]),d("div",No,[d("div",{class:"axis-ranges",onMouseover:t[7]||(t[7]=c=>e.storyModeWarning=i.storyMode),onMouseleave:t[8]||(t[8]=c=>e.storyModeWarning=!1)},[d("div",Ro,[d("div",Oo,[Bo,ne(d("input",{class:"scale-checkbox",id:"x-axis-scale-to-data",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=c=>i.xDomainScaleToData=c),disabled:i.storyMode},null,8,Uo),[[Ce,i.xDomainScaleToData]]),Vo]),I(s,{class:"axis-range-slider",showTooltip:"hover",modelValue:i.xDomainValue,"onUpdate:modelValue":t[4]||(t[4]=c=>i.xDomainValue=c),tooltipPosition:"bottom",disabled:i.storyMode||i.xDomainScaleToData,lazy:!1},null,8,["modelValue","disabled"]),To]),d("div",qo,[d("div",Po,[zo,ne(d("input",{class:"scale-checkbox",id:"y-axis-scale-to-data",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=c=>i.yDomainScaleToData=c)},null,512),[[Ce,i.yDomainScaleToData]]),jo]),I(s,{class:"axis-range-slider",showTooltip:"hover",modelValue:i.yDomainValue,"onUpdate:modelValue":t[6]||(t[6]=c=>i.yDomainValue=c),tooltipPosition:"bottom",disabled:i.storyMode||i.yDomainScaleToData,lazy:!1},null,8,["modelValue","disabled"]),Fo])],32),d("div",{class:"year-selection-slider-container",onMouseover:t[10]||(t[10]=c=>e.storyModeWarning=i.storyMode),onMouseleave:t[11]||(t[11]=c=>e.storyModeWarning=!1)},[i.years[0]===i.years[1]?(_(),S("b",Yo,"Timeframe: "+w(i.years[0]),1)):(_(),S("b",Ho,"Timeframe: "+w(i.years[0])+" - "+w(i.years[1]),1)),I(s,{class:"year-selection-slider",showTooltip:"hover",modelValue:i.years,"onUpdate:modelValue":t[9]||(t[9]=c=>i.years=c),min:2e3,max:2019,"tooltip-position":"bottom",lazy:!1,disabled:i.storyMode},null,8,["modelValue","disabled"]),Qo],32)])])}var Xo=q(Do,[["render",Wo],["__scopeId","data-v-af61c43a"]]);const W=[{scode:"AGO",name:"Angola",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"ALB",name:"Albania",region:"Europe",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:3},{scode:"ARE",name:"United Arab Emirates",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:4},{scode:"ARG",name:"Argentina",region:"Americas",eu:0,g7:0,g20:1,oecd:0,asean:0,global_south:1,income:3},{scode:"ARM",name:"Armenia",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:3},{scode:"AUS",name:"Australia",region:"Oceania",eu:0,g7:0,g20:1,oecd:1,asean:0,global_south:0,income:4},{scode:"AUT",name:"Austria",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"AZE",name:"Azerbaijan",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:3},{scode:"BEL",name:"Belgium",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"BFA",name:"Burkina Faso",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"BGD",name:"Bangladesh",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"BGR",name:"Bulgaria",region:"Europe",eu:1,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:3},{scode:"BLR",name:"Belarus",region:"Europe",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:3},{scode:"BOL",name:"Bolivia",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"BRA",name:"Brazil",region:"Americas",eu:0,g7:0,g20:1,oecd:0,asean:0,global_south:1,income:3},{scode:"BWA",name:"Botswana",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"CAN",name:"Canada",region:"Americas",eu:0,g7:1,g20:1,oecd:1,asean:0,global_south:0,income:4},{scode:"CHE",name:"Switzerland",region:"Europe",eu:0,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"CHL",name:"Chile",region:"Americas",eu:0,g7:0,g20:0,oecd:1,asean:0,global_south:1,income:4},{scode:"CHN",name:"China",region:"Asia",eu:0,g7:0,g20:1,oecd:0,asean:0,global_south:1,income:3},{scode:"CIV",name:"C\xF4te d\u2019Ivoire",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"CMR",name:"Cameroon",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"COD",name:"Congo - Kinshasa",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"COG",name:"Congo - Brazzaville",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"COL",name:"Colombia",region:"Americas",eu:0,g7:0,g20:0,oecd:1,asean:0,global_south:1,income:3},{scode:"CRI",name:"Costa Rica",region:"Americas",eu:0,g7:0,g20:0,oecd:1,asean:0,global_south:1,income:3},{scode:"CUB",name:"Cuba",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"CYP",name:"Cyprus",region:"Asia",eu:1,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:4},{scode:"CZE",name:"Czechia",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"DEU",name:"Germany",region:"Europe",eu:1,g7:1,g20:1,oecd:1,asean:0,global_south:0,income:4},{scode:"DNK",name:"Denmark",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"DOM",name:"Dominican Republic",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"DZA",name:"Algeria",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"ECU",name:"Ecuador",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"EGY",name:"Egypt",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"ESP",name:"Spain",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"EST",name:"Estonia",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"ETH",name:"Ethiopia",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"FIN",name:"Finland",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"FRA",name:"France",region:"Europe",eu:1,g7:1,g20:1,oecd:1,asean:0,global_south:0,income:4},{scode:"GAB",name:"Gabon",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"GBR",name:"United Kingdom",region:"Europe",eu:0,g7:1,g20:1,oecd:1,asean:0,global_south:0,income:4},{scode:"GHA",name:"Ghana",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"GIN",name:"Guinea",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"GMB",name:"Gambia",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"GNB",name:"Guinea-Bissau",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"GRC",name:"Greece",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"GTM",name:"Guatemala",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"GUY",name:"Guyana",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"HKG",name:"Hong Kong SAR China",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:"NA",income:4},{scode:"HND",name:"Honduras",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"HRV",name:"Croatia",region:"Europe",eu:1,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:4},{scode:"HTI",name:"Haiti",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"HUN",name:"Hungary",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"IDN",name:"Indonesia",region:"Asia",eu:0,g7:0,g20:1,oecd:0,asean:1,global_south:1,income:2},{scode:"IND",name:"India",region:"Asia",eu:0,g7:0,g20:1,oecd:0,asean:0,global_south:1,income:2},{scode:"IRL",name:"Ireland",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"IRN",name:"Iran",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"IRQ",name:"Iraq",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"ISL",name:"Iceland",region:"Europe",eu:0,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"ISR",name:"Israel",region:"Asia",eu:0,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"ITA",name:"Italy",region:"Europe",eu:1,g7:1,g20:1,oecd:1,asean:0,global_south:0,income:4},{scode:"JAM",name:"Jamaica",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"JOR",name:"Jordan",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"JPN",name:"Japan",region:"Asia",eu:0,g7:1,g20:1,oecd:1,asean:0,global_south:0,income:4},{scode:"KAZ",name:"Kazakhstan",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:3},{scode:"KEN",name:"Kenya",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"KOR",name:"South Korea",region:"Asia",eu:0,g7:0,g20:1,oecd:1,asean:0,global_south:0,income:4},{scode:"KWT",name:"Kuwait",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:4},{scode:"LBN",name:"Lebanon",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"LBR",name:"Liberia",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"LBY",name:"Libya",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"LKA",name:"Sri Lanka",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"LTU",name:"Lithuania",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"LUX",name:"Luxembourg",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"LVA",name:"Latvia",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"MAR",name:"Morocco",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"MDA",name:"Moldova",region:"Europe",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:3},{scode:"MDG",name:"Madagascar",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"MEX",name:"Mexico",region:"Americas",eu:0,g7:0,g20:1,oecd:1,asean:0,global_south:0,income:3},{scode:"MLI",name:"Mali",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"MMR",name:"Myanmar (Burma)",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:1,global_south:1,income:2},{scode:"MNG",name:"Mongolia",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"MOZ",name:"Mozambique",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"MWI",name:"Malawi",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"MYS",name:"Malaysia",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:1,global_south:1,income:3},{scode:"NAM",name:"Namibia",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"NER",name:"Niger",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"NGA",name:"Nigeria",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"NIC",name:"Nicaragua",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"NLD",name:"Netherlands",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"NOR",name:"Norway",region:"Europe",eu:0,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"NZL",name:"New Zealand",region:"Oceania",eu:0,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"OMN",name:"Oman",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:4},{scode:"PAK",name:"Pakistan",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"PAN",name:"Panama",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"PER",name:"Peru",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"PHL",name:"Philippines",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:1,global_south:1,income:2},{scode:"PNG",name:"Papua New Guinea",region:"Oceania",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"POL",name:"Poland",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"PRT",name:"Portugal",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"PRY",name:"Paraguay",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"QAT",name:"Qatar",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:4},{scode:"ROU",name:"Romania",region:"Europe",eu:1,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:3},{scode:"RUS",name:"Russia",region:"Europe",eu:0,g7:0,g20:1,oecd:0,asean:0,global_south:0,income:3},{scode:"SAU",name:"Saudi Arabia",region:"Asia",eu:0,g7:0,g20:1,oecd:0,asean:0,global_south:1,income:4},{scode:"SDN",name:"Sudan",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"SEN",name:"Senegal",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"SGP",name:"Singapore",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:1,global_south:1,income:4},{scode:"SLE",name:"Sierra Leone",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"SLV",name:"El Salvador",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"SOM",name:"Somalia",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"SRB",name:"Serbia",region:"Europe",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:3},{scode:"SUR",name:"Suriname",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:3},{scode:"SVK",name:"Slovakia",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"SVN",name:"Slovenia",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"SWE",name:"Sweden",region:"Europe",eu:1,g7:0,g20:0,oecd:1,asean:0,global_south:0,income:4},{scode:"SYR",name:"Syria",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"TGO",name:"Togo",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"THA",name:"Thailand",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:1,global_south:1,income:3},{scode:"TTO",name:"Trinidad & Tobago",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:4},{scode:"TUN",name:"Tunisia",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"TUR",name:"Turkey",region:"Asia",eu:0,g7:0,g20:1,oecd:1,asean:0,global_south:0,income:3},{scode:"TZA",name:"Tanzania",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"UGA",name:"Uganda",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"UKR",name:"Ukraine",region:"Europe",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:0,income:2},{scode:"URY",name:"Uruguay",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:4},{scode:"USA",name:"United States",region:"Americas",eu:0,g7:1,g20:1,oecd:1,asean:0,global_south:0,income:4},{scode:"VEN",name:"Venezuela",region:"Americas",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:null},{scode:"VNM",name:"Vietnam",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:1,global_south:1,income:2},{scode:"YEM",name:"Yemen",region:"Asia",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:1},{scode:"ZAF",name:"South Africa",region:"Africa",eu:0,g7:0,g20:1,oecd:0,asean:0,global_south:1,income:3},{scode:"ZMB",name:"Zambia",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2},{scode:"ZWE",name:"Zimbabwe",region:"Africa",eu:0,g7:0,g20:0,oecd:0,asean:0,global_south:1,income:2}].sort((e,t)=>tt(e.name,t.name)),Ko={name:"CountrySelector",components:{Multiselect:nt,InfoIconComponent:ge,HelpPopupComponent:ve},data(){return{options:[{group:"UN Region",items:["Asia","Africa","Europe","Americas","Oceania"].map(e=>({type:"region",label:e,value:e}))},{group:"Income",items:[1,2,3,4].map(e=>({type:"income",label:{1:"Low income",2:"Lower middle income",3:"Upper middle income",4:"High income"}[e],value:e}))},{group:"Membership",items:[{type:"eu",label:"European Union",value:"eu"},{type:"g7",label:"G7",value:"g7"},{type:"g20",label:"G20",value:"g20"},{type:"oecd",label:"OECD",value:"oecd"},{type:"asean",label:"ASEAN",value:"asean"},{type:"south",label:"Global South Countries",value:"south"}]},{group:"All countries",items:W.map(e=>({type:"country",label:e.name,value:e.scode,name:e.name}))}],popUpVisible:!1,helpText:"Click on a country to highlight in the       visualization and in the box below. Search a country by name       or select country groupings from the dropdown menu to add       more countries. Remove countries individually or select       \u201CClear all\u201D to clear all selected countries at once.",storyModeWarning:!1,storyModeWarningLabel:'Inputs are disabled in story mode. Click "Exit story" at the bottom right to change inputs.'}},props:{emptyDefaultCountries:{type:Boolean,default:!1}},methods:{clearAll:function(){this.value=[]}},computed:{value:{get:function(){let e=null;return this.emptyDefaultCountries?e=new Set:e=new Set(this.$store.state.scatterplot.countries),W.filter(t=>e.has(t.scode)).map(t=>({type:"country",label:t.name,value:t.scode,name:t.name}))},set:function(e){const t=e.filter(a=>a.type!=="country");if(!t.length){this.$store.commit("scatterplot/setCountries",e.map(a=>a.value));return}const n=[];for(const a of t)switch(a.type){case"country":{n.push(a.value);continue}case"region":{n.push(...W.filter(o=>o.region===a.value).map(o=>o.scode));break}case"income":{n.push(...W.filter(o=>o.income===a.value).map(o=>o.scode));break}case"eu":{n.push(...W.filter(o=>o.eu).map(o=>o.scode));break}case"g7":{n.push(...W.filter(o=>o.g7).map(o=>o.scode));break}case"g20":{n.push(...W.filter(o=>o.g20).map(o=>o.scode));break}case"oecd":{n.push(...W.filter(o=>o.oecd).map(o=>o.scode));break}case"asean":{n.push(...W.filter(o=>o.asean).map(o=>o.scode));break}case"south":{n.push(...W.filter(o=>o.global_south).map(o=>o.scode));break}}n.includes(this.$store.state.scatterplot.selectedCountry)||this.$store.commit("scatterplot/setSelectedCountry",null),this.$store.commit("scatterplot/setCountries",n),this.$refs.multiselect.deactivate()}},storyMode:function(){return this.$store.state.story.storyMode}}},Zo=e=>(X("data-v-c641d706"),e=e(),K(),e),Jo={class:"country-selector"},ea={class:"country-selector-header"},ta={style:{display:"flex","align-items":"center","grid-gap":"0.5rem"}},na=Zo(()=>d("h4",null,"Countries",-1)),oa={class:"countries-container"},aa={key:0,class:"selected-label"};function ia(e,t,n,a,o,i){const r=N("InfoIconComponent"),l=N("HelpPopupComponent"),s=N("multiselect");return _(),S("div",Jo,[d("div",ea,[d("div",ta,[na,I(r,{onMouseover:t[0]||(t[0]=c=>o.popUpVisible=!0),onMouseleave:t[1]||(t[1]=c=>o.popUpVisible=!1)}),o.popUpVisible?(_(),Q(l,{key:0,content:o.helpText},null,8,["content"])):R("",!0),o.storyModeWarning?(_(),Q(l,{key:1,content:o.storyModeWarningLabel},null,8,["content"])):R("",!0)]),!i.storyMode&&i.value.length>0?(_(),S("button",{key:0,class:"clear-all",onClick:t[2]||(t[2]=(...c)=>i.clearAll&&i.clearAll(...c)),onMouseover:t[3]||(t[3]=c=>o.storyModeWarning=i.storyMode),onMouseleave:t[4]||(t[4]=c=>o.storyModeWarning=!1)}," Clear all ",32)):R("",!0)]),d("div",oa,[d("div",{class:"country-search",onMouseover:t[6]||(t[6]=c=>o.storyModeWarning=i.storyMode),onMouseleave:t[7]||(t[7]=c=>o.storyModeWarning=!1)},[i.value.length>0?(_(),S("span",aa,w(i.value.length)+" selected countries ",1)):R("",!0),I(s,{ref:"multiselect",multiple:!0,modelValue:i.value,"onUpdate:modelValue":t[5]||(t[5]=c=>i.value=c),options:o.options,"close-on-select":!1,"preserve-search":!1,placeholder:"Search countries or select groupings",label:"label","track-by":"value","group-values":"items","group-label":"group",selectLabel:"",selectGroupLabel:"",deselectLabel:"",deselectGroupLabel:"",selectedLabel:"",disabled:i.storyMode},null,8,["modelValue","options","disabled"])],32)])])}var ra=q(Ko,[["render",ia],["__scopeId","data-v-c641d706"]]);const{mapState:sa}=J("scatterplot"),{mapState:la}=J("story"),ca={name:"ShareUrlComponent",props:{},components:{},data:function(){return{copyMessage:!1}},computed:Z(F(F({},sa(["x","y","years","xDomain","yDomain","countries","selectedCountry","showAverageLines"])),la(["storyMode","currentStoryI"])),{exploreURL:function(){const e=new URLSearchParams({x:this.x,y:this.y,y1:this.years[0],y2:this.years[1],countries:JSON.stringify(this.countries)});return`${window.location.origin}${window.location.pathname}?${e}#/explorer`},storyURL:function(){return`${window.location.origin}${window.location.pathname}#/explorer/${this.currentStoryI}`}}),mounted:function(){},methods:{onCopy:function(){const e=[new ClipboardItem({"text/plain":new Blob([this.storyMode?this.storyURL:this.exploreURL],{type:"text/plain"})})];navigator.clipboard.write(e),this.copyMessage=!0,setTimeout(()=>{this.copyMessage=!1},500)}}},da={id:"shareurl-container"},ua={class:"fr relative"},pa={class:"btn-container"},fa=["href"],ma=["href"],ha={key:0,class:"copy-msg"};function ga(e,t,n,a,o,i){return _(),S("section",da,[d("div",ua,[d("div",pa,[e.storyMode?(_(),S("button",{key:1,onClick:t[1]||(t[1]=(...r)=>this.onCopy&&this.onCopy(...r)),href:i.storyURL}," Copy link to this story ",8,ma)):(_(),S("button",{key:0,onClick:t[0]||(t[0]=(...r)=>this.onCopy&&this.onCopy(...r)),href:i.exploreURL}," Copy link to this view ",8,fa))]),this.copyMessage?(_(),S("div",ha,"Copied!")):R("",!0)])])}var va=q(ca,[["render",ga],["__scopeId","data-v-a7c2ee5a"]]);const ya={name:"SidebarComponent",props:{},components:{IndexSelectorComponent:vo,SelectedIndexDescriptions:Mo,ScopeSelectorComponent:Xo,CountrySelector:ra,ShareUrlComponent:va},data:function(){return{}},computed:{},mounted:function(){},methods:{}},ba={id:"sidebar-container"},_a={class:"bg-white br3 pa4 sidebar"};function xa(e,t,n,a,o,i){const r=N("IndexSelectorComponent"),l=N("SelectedIndexDescriptions"),s=N("CountrySelector"),c=N("ScopeSelectorComponent"),p=N("ShareUrlComponent");return _(),S("section",ba,[d("section",_a,[I(r),I(l),I(s),I(c),I(p)])])}var wa=q(ya,[["render",xa],["__scopeId","data-v-01c391d0"]]);function Aa(e){return e`# Inputs
<div style="margin-top: -3px; font-weight: 100; font-size: 1.05em;">*a.k.a “The Grand Native Inputs Bazaar”*</div>

<img width="350px" src="https://gist.githubusercontent.com/jashkenas/0c1a40e6fdd2a8df5d3a4177e0a2a5cd/raw/66df7c29968fc8398833ffe7c72f06cb37211c69/capstan.gif" />

A collection of assorted fancy inputs, odds and ends — with which to produce values to feed your burgeoning sketches. All inputs support optional **titles** and **descriptions**; where it makes sense, inputs also support a **submit** option, which allows you to prevent the value from updating until the input has been finalized.

Wares we have on offer: 
  * [\`slider\`](#sliderDemo)
  * [\`button\`](#buttonDemo)
  * [\`select\`](#selectDemo)
  * [\`autoSelect\`](#autoSelectDemo)
  * [\`color\`](#colorDemo)
  * [\`coordinates\`](#coordinatesDemo)
  * [\`worldMapCoordinates\`](#worldMapCoordinatesDemo)
  * [\`usaMapCoordinates\`](#usaMapCoordinatesDemo)
  * [\`date\`](#dateDemo)
  * [\`time\`](#timeDemo)
  * [\`file\`](#fileDemo)
  * [\`text\`](#textDemo)
  * [\`textarea\`](#textareaDemo)
  * [\`radio\`](#radioDemo)
  * [\`checkbox\`](#checkboxDemo)
  * [\`number\`](#numberDemo)
  * [\`password\`](#passwordDemo)`}function Ca(e){return e`#### Friends & Family: 

- For fully custom forms, combining various inputs into a single reactive cell, try [@mbostock/form-input](/@mbostock/form-input).

- For color scheme and interpolation pickers, take a look at [@zechasault/color-schemes-and-interpolators-picker](/@zechasault/color-schemes-and-interpolators-picker)

- For true range sliders, setting both a minimum and maximum value in a single widget, you can't go wrong with [@mootari/range-slider](https://observablehq.com/@mootari/range-slider).

- For data-driven range sliders, displaying a histogram of the distribution and allowing you to filter out a range of a dataset along a given attribute, see [@bumbeishvili/data-driven-range-sliders](/@bumbeishvili/data-driven-range-sliders), or [@trebor/snapping-histogram-slider](/@trebor/snapping-histogram-slider)

- For a ternary plot input, describing the percentages of a whole composed of exactly three things, give [@yurivish/ternary-slider](/@yurivish/ternary-slider) a try.

*If you have any improvements for the bazaar, [please make your change in a fork and send it to me as a suggestion.](https://observablehq.com/@observablehq/suggestions-and-comments)*`}function Sa(e){return e`---
## Sliders

~~~js
import {slider} from "@jashkenas/inputs"
~~~`}function ka(e){return e()}function Ma(e){return e({min:0,max:1,step:.01,format:".0%",description:"Zero to one, formatted as a percentage"})}function Da(e){return e({min:0,max:1,step:.01,format:t=>`${Math.round(100*t)} per cent`,description:"Zero to one, formatted with a custom function"})}function $a(e){return e({min:0,max:1e9,step:1e3,value:325e4,format:",",description:"Zero to one billion, in steps of one thousand, formatted as a (US) number"})}function Ea(e){return e({min:0,max:100,step:1,value:10,title:"Integers",description:"Integers from zero through 100"})}function Ia(e){return e({min:.9,max:1.1,precision:3,description:"A high precision slider example"})}function La(e){return e({min:.9,max:1.1,precision:3,submit:!0,description:"The same as a4, but only changes value on submit"})}function Ga(e){return e`More [fancy slider techniques](https://beta.observablehq.com/@mootari/prime-numbers-slider).`}function Na(e){return function(n={}){let{min:a=0,max:o=1,value:i=(o+a)/2,step:r="any",precision:l=2,title:s,description:c,getValue:p,format:g,display:h,submit:y}=typeof n=="number"?{value:n}:n;return l=Math.pow(10,l),p||(p=v=>Math.round(v.valueAsNumber*l)/l),e({type:"range",title:s,description:c,submit:y,format:g,display:h,attributes:{min:a,max:o,step:r,value:i},getValue:p})}}function Ra(e){return e`---
## Buttons

~~~js
import {button} from "@jashkenas/inputs"
~~~`}function Oa(e){return e()}function Ba(e){return!this}function Ua(e){return e({value:"Click me",description:"We use a reference to the button below to record the time you pressed it."})}function Va(e){return new Date(Date.now()).toUTCString()}function Ta(e){return function(n={}){const{value:a="Ok",title:o,description:i,disabled:r}=typeof n=="string"?{value:n}:n,l=e({type:"button",title:o,description:i,attributes:{disabled:r,value:a}});return l.output.remove(),l}}function qa(e){return e`---
## Dropdown Menus and Multiselects

~~~js
import {select} from "@jashkenas/inputs"
~~~`}function Pa(e){return e(["Spring","Summer","Fall","Winter"])}function za(e){return e}function ja(e){return e({title:"Stooges",description:"Please pick your favorite stooge.",options:["Curly","Larry","Moe","Shemp"],value:"Moe"})}function Fa(e){return e}function Ya(e){return e({description:"As a child, which vegetables did you refuse to eat?",options:["Spinach","Broccoli","Brussels Sprouts","Cauliflower","Kale","Turnips","Green Beans","Asparagus"],multiple:!0})}function Ha(e){return e}function Qa(e){const t=e({title:"How are you feeling today?",options:[{label:"\u{1F937}",value:"shrug"},{label:"\u{1F602}",value:"tears-of-joy"},{label:"\u{1F60D}",value:"loving-it"},{label:"\u{1F914}",value:"hmmm"},{label:"\u{1F631}",value:"yikes"},{label:"\u{1F608}",value:"mischievous"},{label:"\u{1F4A9}",value:"poo"}],value:"hmmm"});return t.input.style.fontSize="30px",t.input.style.marginTop="8px",t}function Wa(e){return e}function Xa(e,t){return function(a={}){let{value:o,title:i,description:r,submit:l,multiple:s,size:c,options:p}=Array.isArray(a)?{options:a}:a;p=p.map(h=>typeof h=="object"?h:{value:h,label:h});const g=e({type:"select",title:i,description:r,submit:l,getValue:h=>{const y=Array.prototype.filter.call(h.options,v=>v.selected).map(v=>v.value);return s?y:y[0]},form:t`
      <form>
        <select name="input" ${s?`multiple size="${c||p.length}"`:""}>
          ${p.map(({value:h,label:y})=>Object.assign(t`<option>`,{value:h,selected:Array.isArray(o)?o.includes(h):o===h,textContent:y}))}
        </select>
      </form>
    `});return g.output.remove(),g}}function Ka(e){return e`---
## Autoselects
*A variant of an option menu, using an autocompleting text input, via HTML’s datalist element.* 

~~~js
import {autoSelect} from "@jashkenas/inputs"
~~~`}function Za(e,t){return e({options:t.objects.states.geometries.map(n=>n.properties.name),placeholder:"Search for a US state . . ."})}function Ja(e){return e}function ei(e,t){return function(a={}){const{value:o,title:i,description:r,autocomplete:l="off",placeholder:s,size:c,options:p,list:g="options"}=Array.isArray(a)?{options:a}:a,h=new Set(p),y=e({type:"text",title:i,description:r,action:v=>{v.value=v.input.value=o||"",v.onsubmit=f=>f.preventDefault(),v.input.oninput=function(f){f.stopPropagation(),v.value=v.input.value,h.has(v.input.value)&&v.dispatchEvent(new CustomEvent("input"))}},form:t`
      <form>
         <input name="input" type="text" autocomplete="off" 
          placeholder="${s}" style="font-size: 1em;" list=${g}>
          <datalist id="${g}">
              ${p.map(v=>Object.assign(t`<option>`,{value:v}))}
          </datalist>
      </form>
      `});return y.output.remove(),y}}function ti(e){return e`---
## Color Pickers

*value: a hexadecimal string, e.g. * \`"#bada55"\` 

~~~js
import {color} from "@jashkenas/inputs"
~~~`}function ni(e){return e()}function oi(e){return e({value:"#0000ff",title:"Background Color",description:"This color picker starts out blue"})}function ai(e){return function(n={}){const{value:a="#000000",title:o,description:i,submit:r,display:l}=typeof n=="string"?{value:n}:n,s=e({type:"color",title:o,description:i,submit:r,display:l,attributes:{value:a}});return(o||i)&&(s.input.style.margin="5px 0"),s}}function ii(e){return e` ---
## Coordinates

*value: an array pair of \`[longitude, latitude]\`, e.g. * \`[-122.27, 37.87]\` 

~~~js
import {coordinates} from "@jashkenas/inputs"
~~~`}function ri(e){return e()}function si(e){return e}function li(e){return e({title:"Hometown",description:"Enter the coordinates of where you were born",value:[-122.27,37.87],submit:!0})}function ci(e){return e}function di(e,t){return function(a={}){const{value:o=[],title:i,description:r,submit:l}=Array.isArray(a)?{value:a}:a;let[s,c]=o;s=s!=null?s:"",c=c!=null?c:"";const p=e`<input name="input" type="number" autocomplete="off" min="-180" max="180" style="width: 80px;" step="any" value="${s}" />`,g=e`<input name="input" type="number" autocomplete="off" min="-90" max="90" style="width: 80px;" step="any" value="${c}" />`,h=t({type:"coordinates",title:i,description:r,submit:l,getValue:()=>{const y=p.valueAsNumber,v=g.valueAsNumber;return[isNaN(y)?null:y,isNaN(v)?null:v]},form:e`
      <form>
        <label style="display: inline-block; font: 600 0.8rem sans-serif; margin: 6px 0 0;">
          <span style="display: inline-block; width: 70px;">Longitude:</span>
          ${p}
        </label>
        <br>
        <label style="display: inline-block; font: 600 0.8rem sans-serif; margin: 0 0 6px;">
          <span style="display: inline-block; width: 70px;">Latitude:</span>
          ${g}
        </label>
      </form>
    `});return h.output.remove(),h}}function ui(e){return e` ---
## World Map Coordinates

*value: an array pair of \`[longitude, latitude]\`, e.g. * \`[-122.27, 37.87]\` 

~~~js
import {worldMapCoordinates} from "@jashkenas/inputs"
~~~`}function pi(e){return e([-122.27,37.87])}function fi(e){return e}function mi(e,t,n,a,o,i,r){return function(s={}){const{value:c=[],title:p,description:g,width:h=400}=Array.isArray(s)?{value:s}:s,y=Math.round(210/400*h);let[v,f]=c;v=v!=null?v:null,f=f!=null?f:null;const m=e`<form style="width: ${h}px;"></form>`,u=t.context2d(h,y),x=u.canvas;x.style.margin="10px 0 0";const D=n.geoNaturalEarth1().precision(.1).fitSize([h,y],{type:"Sphere"}),C=n.geoPath(D,u).pointRadius(2.5);m.append(x);function L(){if(u.fillStyle="#fff",u.fillRect(0,0,h,y),u.beginPath(),C(a),u.lineWidth=.35,u.strokeStyle="#ddd",u.stroke(),u.beginPath(),C(o),u.fillStyle="#f4f4f4",u.fill(),u.beginPath(),C(i),u.strokeStyle="#aaa",u.stroke(),v!=null&&f!=null){const A={type:"MultiPoint",coordinates:[[v,f]]};u.beginPath(),C(A),u.fillStyle="#f00",u.fill()}}return x.onclick=function(A){const{offsetX:M,offsetY:G}=A;var O=D.invert([M,G]);v=+O[0].toFixed(2),f=+O[1].toFixed(2),L(),x.dispatchEvent(new CustomEvent("input",{bubbles:!0}))},L(),r({type:"worldMapCoordinates",title:p,description:g,display:A=>e`<div style="position: absolute; width: ${h}px; white-space: nowrap; color: #444; text-align: center; font: 13px sans-serif; margin-top: -18px;">
            <span style="color: #777;">Longitude:</span> ${v!=null?v:""}
            &nbsp; &nbsp; 
            <span style="color: #777;">Latitude:</span> ${f!=null?f:""} 
          </div>`,getValue:()=>[v!=null?v:null,f!=null?f:null],form:m})}}function hi(e){return e` ---
## U.S.A. Map Coordinates

*value: an array pair of \`[longitude, latitude]\`, e.g. * \`[-122.27, 37.87]\` 

~~~js
import {usaMapCoordinates} from "@jashkenas/inputs"
~~~`}function gi(e){return e([-122.27,37.87])}function vi(e){return e}function yi(e){return e({title:"A Mini Map",description:"Defaults to New York City",width:200,value:[-74,40.71]})}function bi(e){return e}function _i(e,t,n,a,o,i){return function(l={}){const{value:s=[],title:c,description:p,width:g=400}=Array.isArray(l)?{value:l}:l,h=g/960,y=h*600;let[v,f]=s;v=v!=null?v:null,f=f!=null?f:null;const m=e`<form style="width: ${g}px;"></form>`,u=t.context2d(g,y),x=u.canvas;x.style.margin="5px 0 0";const D=n.geoAlbersUsa().scale(1280).translate([480,300]),C=n.geoPath().context(u).pointRadius(2.5/h);m.append(x);function L(){if(u.clearRect(0,0,g,y),u.save(),u.scale(h,h),u.lineWidth=.35/h,u.beginPath(),C(a),u.fillStyle="#f4f4f4",u.fill(),u.beginPath(),C(o),u.strokeStyle="#aaa",u.stroke(),v!=null&&f!=null){const A={type:"MultiPoint",coordinates:[D([v,f])]};u.beginPath(),C(A),u.fillStyle="#f00",u.fill()}u.restore()}return x.onclick=function(A){const{offsetX:M,offsetY:G}=A;var O=D.invert([M/h,G/h]);v=+O[0].toFixed(2),f=+O[1].toFixed(2),L(),x.dispatchEvent(new CustomEvent("input",{bubbles:!0}))},L(),i({type:"worldMapCoordinates",title:c,description:p,display:A=>e`<div style="position: absolute; width: ${g}px; white-space: nowrap; color: #444; text-align: center; font: 13px sans-serif; margin-top: -18px;">
            <span style="color: #777;">Longitude:</span> ${v!=null?v:""}
            &nbsp; &nbsp; 
            <span style="color: #777;">Latitude:</span> ${f!=null?f:""} 
          </div>`,getValue:()=>[v!=null?v:null,f!=null?f:null],form:m})}}function xi(e){return e` ---
## Dates

*value: a YYYY-MM-DD formatted string: * \`"2016-11-08"\` 

~~~js
import {date} from "@jashkenas/inputs"
~~~`}function wi(e){return e()}function Ai(e){return e({title:"2017",min:"2017-01-01",max:"2017-12-31",value:"2017-01-01",description:"Only dates within the 2017 calendar year are allowed"})}function Ci(e){return function(n={}){const{min:a,max:o,value:i,title:r,description:l,display:s}=typeof n=="string"?{value:n}:n;return e({type:"date",title:r,description:l,display:s,attributes:{min:a,max:o,value:i}})}}function Si(e){return e` ---
## Times

*value: a HH:MM:SS formatted string: * \`"09:30:45"\`
<br>*(Time values are always in 24-hour format)*

~~~js
import {time} from "@jashkenas/inputs"
~~~`}function ki(e){return e()}function Mi(e){return e}function Di(e){return e({title:"Afternoon",min:"12:00:00",max:"23:59:59",value:"13:00:00",step:1,description:"Only times after noon are allowed, and seconds are included"})}function $i(e){return e}function Ei(e){return function(n={}){const{min:a,max:o,step:i,value:r,title:l,description:s,display:c}=typeof n=="string"?{value:n}:n,p=e({type:"time",title:l,description:s,display:c,getValue:g=>g.value?g.value:void 0,attributes:{min:a,max:o,step:i,value:r}});return p.output.remove(),p}}function Ii(e){return e`---
## File Upload
*Use the JavaScript [File API](https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications) to work with uploaded file contents.*

\`import {file} from "@jashkenas/inputs"\``}function Li(e){return e()}function Gi(e){return e({title:"Photographs",description:"Only .jpg files are allowed in this example. Choose some images, and they\u2019ll appear in the cell below.",accept:".jpg",multiple:!0})}async function Ni(e,t,n){const a=e`<div>`;for(var o=0;o<t.length;o++){t[o];let i=e`<img height="125px" style="margin: 2px;" />`;i.src=await n.url(t[o]),a.append(i)}return a}function Ri(e){return function(n={}){const{multiple:a,accept:o,title:i,description:r}=n,l=e({type:"file",title:i,description:r,attributes:{multiple:a,accept:o},action:s=>{s.input.onchange=()=>{s.value=a?s.input.files:s.input.files[0],s.dispatchEvent(new CustomEvent("input"))}}});return l.output.remove(),l.input.onchange(),l}}function Oi(e){return e`---
## Text Inputs

~~~js
import {text} from "@jashkenas/inputs"
~~~`}function Bi(e){return e()}function Ui(e){return e({title:"A Text Input",placeholder:"Placeholder text",description:"Note that text inputs don\u2019t show output on the right"})}function Vi(e){return e}function Ti(e){return e({placeholder:"Placeholder text",description:"This input only changes value on submit",submit:"Go"})}function qi(e){return e}function Pi(e){return function(n={}){const{value:a,title:o,description:i,autocomplete:r="off",maxlength:l,minlength:s,pattern:c,placeholder:p,size:g,submit:h}=typeof n=="string"?{value:n}:n,y=e({type:"text",title:o,description:i,submit:h,attributes:{value:a,autocomplete:r,maxlength:l,minlength:s,pattern:c,placeholder:p,size:g}});return y.output.remove(),y.input.style.fontSize="1em",y}}function zi(e){return e`---
## Textareas

~~~js
import {textarea} from "@jashkenas/inputs"
~~~`}function ji(e){return e()}function Fi(e){return e}function Yi(e){return e({title:"Your Great American Novel",placeholder:"Insert story here...",spellcheck:!0,width:"100%",rows:10,submit:"Publish"})}function Hi(e){return e}function Qi(e,t){return function(a={}){const{value:o="",title:i,description:r,autocomplete:l,cols:s=45,rows:c=3,width:p,height:g,maxlength:h,placeholder:y,spellcheck:v,wrap:f,submit:m}=typeof a=="string"?{value:a}:a,u=e({form:t`<form><textarea style="display: block; font-size: 0.8em;" name=input>${o}</textarea></form>`,title:i,description:r,submit:m,attributes:{autocomplete:l,cols:s,rows:c,maxlength:h,placeholder:y,spellcheck:v,wrap:f}});return u.output.remove(),p!=null&&(u.input.style.width=p),g!=null&&(u.input.style.height=g),m&&(u.submit.style.margin="0"),(i||r)&&(u.input.style.margin="3px 0"),u}}function Wi(e){return e`---
## Radio Buttons

~~~js
import {radio} from "@jashkenas/inputs"
~~~`}function Xi(e){return e(["Lust","Gluttony","Greed","Sloth","Wrath","Envy","Pride"])}function Ki(e){return e}function Zi(e){return e({title:"Contact Us",description:"Please select your preferred contact method",options:[{label:"By Email",value:"email"},{label:"By Phone",value:"phone"},{label:"By Pager",value:"pager"}],value:"pager"})}function Ji(e){return e}function er(e,t){return function(a={}){let{value:o,title:i,description:r,submit:l,options:s}=Array.isArray(a)?{options:a}:a;s=s.map(p=>typeof p=="string"?{value:p,label:p}:p);const c=e({type:"radio",title:i,description:r,submit:l,getValue:p=>{if(p.checked)return p.value;const g=Array.prototype.find.call(p,h=>h.checked);return g?g.value:void 0},form:t`
      <form>
        ${s.map(({value:p,label:g})=>{const h=t`<input type=radio name=input ${p===o?"checked":""} style="vertical-align: baseline;" />`;return h.setAttribute("value",p),t`
          <label style="display: inline-block; margin: 5px 10px 3px 0; font-size: 0.85em;">
           ${h}
           ${g}
          </label>`})}
      </form>
    `});return c.output.remove(),c}}function tr(e){return e`---
## Checkboxes

~~~js
import {checkbox} from "@jashkenas/inputs"
~~~`}function nr(e){return e(["Lust","Gluttony","Greed","Sloth","Wrath","Envy","Pride"])}function or(e){return e}function ar(e){return e({title:"Colors",description:"Please select your favorite colors",options:[{value:"r",label:"Red"},{value:"o",label:"Orange"},{value:"y",label:"Yellow"},{value:"g",label:"Green"},{value:"b",label:"Blue"},{value:"i",label:"Indigo"},{value:"v",label:"Violet"}],value:["r","g","b"],submit:!0})}function ir(e){return e}function rr(e){return e({description:"Just a single checkbox to toggle",options:[{value:"toggle",label:"On"}],value:"toggle"})}function sr(e){return e}function lr(e,t){return function(a={}){let{value:o,title:i,description:r,submit:l,options:s}=Array.isArray(a)?{options:a}:a;s=s.map(p=>typeof p=="string"?{value:p,label:p}:p);const c=e({type:"checkbox",title:i,description:r,submit:l,getValue:p=>p.length?Array.prototype.filter.call(p,g=>g.checked).map(g=>g.value):p.checked?p.value:!1,form:t`
      <form>
        ${s.map(({value:p,label:g})=>{const h=t`<input type=checkbox name=input ${(o||[]).indexOf(p)>-1?"checked":""} style="vertical-align: baseline;" />`;return h.setAttribute("value",p),t`<label style="display: inline-block; margin: 5px 10px 3px 0; font-size: 0.85em;">
           ${h}
           ${g}
          </label>`})}
      </form>
    `});return c.output.remove(),c}}function cr(e){return e`---
## Numbers

~~~js
import {number} from "@jashkenas/inputs"
~~~`}function dr(e){return e()}function ur(e){return e}function pr(e){return e({placeholder:"13+",title:"Your Age",submit:!0})}function fr(e){return e}function mr(e){return function(n={}){const{value:a,title:o,description:i,placeholder:r,submit:l,step:s="any",min:c,max:p}=typeof n=="number"||typeof n=="string"?{value:+n}:n,g=e({type:"number",title:o,description:i,submit:l,attributes:{value:a,placeholder:r,step:s,min:c,max:p,autocomplete:"off"},getValue:h=>h.valueAsNumber});return g.output.remove(),g.input.style.width="auto",g.input.style.fontSize="1em",g}}function hr(e){return e`---
## Passwords

~~~js
import {password} from "@jashkenas/inputs"
~~~`}function gr(e){return e({value:"password"})}function vr(e){return e}function yr(e){return e({title:"Your super secret password",description:"Less than 12 characters, please.",minlength:6,maxlength:12})}function br(e){return e}function _r(e){return function(n={}){const{value:a,title:o,description:i,autocomplete:r="off",maxlength:l,minlength:s,pattern:c,placeholder:p,size:g,submit:h}=typeof n=="string"?{value:n}:n,y=e({type:"password",title:o,description:i,submit:h,attributes:{value:a,autocomplete:r,maxlength:l,minlength:s,pattern:c,placeholder:p,size:g}});return y.output.remove(),y.input.style.fontSize="1em",y}}function xr(e){return e`---
## Wishlist (Send suggestions, please!)

* Location picker!
* 2D coordinate input (using an &lt;svg>)
* 3D coordinate input (for say, positioning a camera in a WebGL sketch)
* Geocoder search with location autocomplete that returns longitude and latitude.
* Degrees or radians input, for circular things, or angles.
* A dimensions input, or a box-model input, with margin (and optionally, padding).
* A map-projection-picker input, rendering little thumbnails of all the d3-geo-projections.
* Other useful formatting options.

---`}function wr(e,t){return function(a){let{form:o,type:i="text",attributes:r={},action:l,getValue:s,title:c,description:p,format:g,display:h,submit:y,options:v}=a;const f=e`<div></div>`;if(o||(o=e`<form>
	<input name=input type=${i} />
  </form>`),Object.keys(r).forEach(m=>{const u=r[m];u!=null&&o.input.setAttribute(m,u)}),y&&o.append(e`<input name=submit type=submit style="margin: 0 0.75em" value="${typeof y=="string"?y:"Submit"}" />`),o.append(e`<output name=output style="font: 14px Menlo, Consolas, monospace; margin-left: 0.5em;"></output>`),c&&o.prepend(e`<div style="font: 700 0.9rem sans-serif;">${c}</div>`),p&&o.append(e`<div style="font-size: 0.85rem; font-style: italic;">${p}</div>`),g&&(g=typeof g=="function"?g:t.format(g)),l)l(o);else{const m=y?"onsubmit":i=="button"?"onclick":i=="checkbox"||i=="radio"?"onchange":"oninput";o[m]=u=>{u&&u.preventDefault();const x=s?s(o.input):o.input.value;if(o.output){const D=h?h(x):g?g(x):x;if(D instanceof window.Element){for(;o.output.hasChildNodes();)o.output.removeChild(o.output.lastChild);o.output.append(D)}else o.output.value=D}o.value=x,m!=="oninput"&&o.dispatchEvent(new CustomEvent("input",{bubbles:!0}))},m!=="oninput"&&(f.oninput=u=>u&&u.stopPropagation()&&u.preventDefault()),m!=="onsubmit"&&(o.onsubmit=u=>u&&u.preventDefault()),o[m]()}for(;o.childNodes.length;)f.appendChild(o.childNodes[0]);return o.append(f),o}}function Ar(e){return e("d3-geo@1")}function Cr(e){return e("d3-format@1")}function Sr(e){return e("topojson-client@3")}async function kr(){return(await fetch("https://cdn.jsdelivr.net/npm/world-atlas@1/world/110m.json")).json()}function Mr(e,t){return e.feature(t,t.objects.land)}function Dr(e,t){return e.feature(t,t.objects.countries)}async function $r(){return(await fetch("https://cdn.jsdelivr.net/npm/us-atlas@^2.1/us/states-10m.json")).json()}function Er(e,t){return e.feature(t,t.objects.nation)}function Ir(e,t){return e.feature(t,t.objects.states)}function Lr(e){return e.geoGraticule10()}function Gr(e){const t=e`License: [MIT](https://opensource.org/licenses/MIT)`;return t.value="MIT",t}function Nr(e){return e`*Clip art courtesy [ClipArt ETC](https://etc.usf.edu/clipart/), radio buttons and checkboxes courtesy [Amit Sch](https://beta.observablehq.com/@meetamit/multiple-choice-inputs).*`}function Rr(e,t){const n=e.module();return n.variable(t()).define(["md"],Aa),n.variable(t()).define(["md"],Ca),n.variable(t("sliderDemo")).define("sliderDemo",["md"],Sa),n.variable(t("viewof a")).define("viewof a",["slider"],ka),n.variable(t("a")).define("a",["Generators","viewof a"],(a,o)=>a.input(o)),n.variable(t("viewof a1")).define("viewof a1",["slider"],Ma),n.variable(t("a1")).define("a1",["Generators","viewof a1"],(a,o)=>a.input(o)),n.variable(t("viewof a1_1")).define("viewof a1_1",["slider"],Da),n.variable(t("a1_1")).define("a1_1",["Generators","viewof a1_1"],(a,o)=>a.input(o)),n.variable(t("viewof a2")).define("viewof a2",["slider"],$a),n.variable(t("a2")).define("a2",["Generators","viewof a2"],(a,o)=>a.input(o)),n.variable(t("viewof a3")).define("viewof a3",["slider"],Ea),n.variable(t("a3")).define("a3",["Generators","viewof a3"],(a,o)=>a.input(o)),n.variable(t("viewof a4")).define("viewof a4",["slider"],Ia),n.variable(t("a4")).define("a4",["Generators","viewof a4"],(a,o)=>a.input(o)),n.variable(t("viewof a5")).define("viewof a5",["slider"],La),n.variable(t("a5")).define("a5",["Generators","viewof a5"],(a,o)=>a.input(o)),n.variable(t()).define(["md"],Ga),n.variable(t("slider")).define("slider",["input"],Na),n.variable(t("buttonDemo")).define("buttonDemo",["md"],Ra),n.variable(t("viewof b")).define("viewof b",["button"],Oa),n.variable(t("b")).define("b",["Generators","viewof b"],(a,o)=>a.input(o)),n.variable(t()).define(["b"],Ba),n.variable(t("viewof b1")).define("viewof b1",["button"],Ua),n.variable(t("b1")).define("b1",["Generators","viewof b1"],(a,o)=>a.input(o)),n.variable(t()).define(["b1"],Va),n.variable(t("button")).define("button",["input"],Ta),n.variable(t("selectDemo")).define("selectDemo",["md"],qa),n.variable(t("viewof dd")).define("viewof dd",["select"],Pa),n.variable(t("dd")).define("dd",["Generators","viewof dd"],(a,o)=>a.input(o)),n.variable(t()).define(["dd"],za),n.variable(t("viewof dd1")).define("viewof dd1",["select"],ja),n.variable(t("dd1")).define("dd1",["Generators","viewof dd1"],(a,o)=>a.input(o)),n.variable(t()).define(["dd1"],Fa),n.variable(t("viewof dd2")).define("viewof dd2",["select"],Ya),n.variable(t("dd2")).define("dd2",["Generators","viewof dd2"],(a,o)=>a.input(o)),n.variable(t()).define(["dd2"],Ha),n.variable(t("viewof dd3")).define("viewof dd3",["select"],Qa),n.variable(t("dd3")).define("dd3",["Generators","viewof dd3"],(a,o)=>a.input(o)),n.variable(t()).define(["dd3"],Wa),n.variable(t("select")).define("select",["input","html"],Xa),n.variable(t("autoSelectDemo")).define("autoSelectDemo",["md"],Ka),n.variable(t("viewof as")).define("viewof as",["autoSelect","usa"],Za),n.variable(t("as")).define("as",["Generators","viewof as"],(a,o)=>a.input(o)),n.variable(t()).define(["as"],Ja),n.variable(t("autoSelect")).define("autoSelect",["input","html"],ei),n.variable(t("colorDemo")).define("colorDemo",["md"],ti),n.variable(t("viewof c")).define("viewof c",["color"],ni),n.variable(t("c")).define("c",["Generators","viewof c"],(a,o)=>a.input(o)),n.variable(t("viewof c1")).define("viewof c1",["color"],oi),n.variable(t("c1")).define("c1",["Generators","viewof c1"],(a,o)=>a.input(o)),n.variable(t("color")).define("color",["input"],ai),n.variable(t("coordinatesDemo")).define("coordinatesDemo",["md"],ii),n.variable(t("viewof coords1")).define("viewof coords1",["coordinates"],ri),n.variable(t("coords1")).define("coords1",["Generators","viewof coords1"],(a,o)=>a.input(o)),n.variable(t()).define(["coords1"],si),n.variable(t("viewof coords2")).define("viewof coords2",["coordinates"],li),n.variable(t("coords2")).define("coords2",["Generators","viewof coords2"],(a,o)=>a.input(o)),n.variable(t()).define(["coords2"],ci),n.variable(t("coordinates")).define("coordinates",["html","input"],di),n.variable(t("worldMapCoordinatesDemo")).define("worldMapCoordinatesDemo",["md"],ui),n.variable(t("viewof worldMap1")).define("viewof worldMap1",["worldMapCoordinates"],pi),n.variable(t("worldMap1")).define("worldMap1",["Generators","viewof worldMap1"],(a,o)=>a.input(o)),n.variable(t()).define(["worldMap1"],fi),n.variable(t("worldMapCoordinates")).define("worldMapCoordinates",["html","DOM","d3geo","graticule","land","countries","input"],mi),n.variable(t("usaMapCoordinatesDemo")).define("usaMapCoordinatesDemo",["md"],hi),n.variable(t("viewof usaMap1")).define("viewof usaMap1",["usaMapCoordinates"],gi),n.variable(t("usaMap1")).define("usaMap1",["Generators","viewof usaMap1"],(a,o)=>a.input(o)),n.variable(t()).define(["usaMap1"],vi),n.variable(t("viewof usaMap2")).define("viewof usaMap2",["usaMapCoordinates"],yi),n.variable(t("usaMap2")).define("usaMap2",["Generators","viewof usaMap2"],(a,o)=>a.input(o)),n.variable(t()).define(["usaMap2"],bi),n.variable(t("usaMapCoordinates")).define("usaMapCoordinates",["html","DOM","d3geo","nation","states","input"],_i),n.variable(t("dateDemo")).define("dateDemo",["md"],xi),n.variable(t("viewof d")).define("viewof d",["date"],wi),n.variable(t("d")).define("d",["Generators","viewof d"],(a,o)=>a.input(o)),n.variable(t("viewof d1")).define("viewof d1",["date"],Ai),n.variable(t("d1")).define("d1",["Generators","viewof d1"],(a,o)=>a.input(o)),n.variable(t("date")).define("date",["input"],Ci),n.variable(t("timeDemo")).define("timeDemo",["md"],Si),n.variable(t("viewof t")).define("viewof t",["time"],ki),n.variable(t("t")).define("t",["Generators","viewof t"],(a,o)=>a.input(o)),n.variable(t()).define(["t"],Mi),n.variable(t("viewof t1")).define("viewof t1",["time"],Di),n.variable(t("t1")).define("t1",["Generators","viewof t1"],(a,o)=>a.input(o)),n.variable(t()).define(["t1"],$i),n.variable(t("time")).define("time",["input"],Ei),n.variable(t("fileDemo")).define("fileDemo",["md"],Ii),n.variable(t("viewof e")).define("viewof e",["file"],Li),n.variable(t("e")).define("e",["Generators","viewof e"],(a,o)=>a.input(o)),n.variable(t("viewof e1")).define("viewof e1",["file"],Gi),n.variable(t("e1")).define("e1",["Generators","viewof e1"],(a,o)=>a.input(o)),n.variable(t()).define(["html","e1","Files"],Ni),n.variable(t("file")).define("file",["input"],Ri),n.variable(t("textDemo")).define("textDemo",["md"],Oi),n.variable(t("viewof f")).define("viewof f",["text"],Bi),n.variable(t("f")).define("f",["Generators","viewof f"],(a,o)=>a.input(o)),n.variable(t("viewof f1")).define("viewof f1",["text"],Ui),n.variable(t("f1")).define("f1",["Generators","viewof f1"],(a,o)=>a.input(o)),n.variable(t()).define(["f1"],Vi),n.variable(t("viewof f2")).define("viewof f2",["text"],Ti),n.variable(t("f2")).define("f2",["Generators","viewof f2"],(a,o)=>a.input(o)),n.variable(t()).define(["f2"],qi),n.variable(t("text")).define("text",["input"],Pi),n.variable(t("textareaDemo")).define("textareaDemo",["md"],zi),n.variable(t("viewof g")).define("viewof g",["textarea"],ji),n.variable(t("g")).define("g",["Generators","viewof g"],(a,o)=>a.input(o)),n.variable(t()).define(["g"],Fi),n.variable(t("viewof g1")).define("viewof g1",["textarea"],Yi),n.variable(t("g1")).define("g1",["Generators","viewof g1"],(a,o)=>a.input(o)),n.variable(t()).define(["g1"],Hi),n.variable(t("textarea")).define("textarea",["input","html"],Qi),n.variable(t("radioDemo")).define("radioDemo",["md"],Wi),n.variable(t("viewof r")).define("viewof r",["radio"],Xi),n.variable(t("r")).define("r",["Generators","viewof r"],(a,o)=>a.input(o)),n.variable(t()).define(["r"],Ki),n.variable(t("viewof r1")).define("viewof r1",["radio"],Zi),n.variable(t("r1")).define("r1",["Generators","viewof r1"],(a,o)=>a.input(o)),n.variable(t()).define(["r1"],Ji),n.variable(t("radio")).define("radio",["input","html"],er),n.variable(t("checkboxDemo")).define("checkboxDemo",["md"],tr),n.variable(t("viewof ch")).define("viewof ch",["checkbox"],nr),n.variable(t("ch")).define("ch",["Generators","viewof ch"],(a,o)=>a.input(o)),n.variable(t()).define(["ch"],or),n.variable(t("viewof ch1")).define("viewof ch1",["checkbox"],ar),n.variable(t("ch1")).define("ch1",["Generators","viewof ch1"],(a,o)=>a.input(o)),n.variable(t()).define(["ch1"],ir),n.variable(t("viewof ch3")).define("viewof ch3",["checkbox"],rr),n.variable(t("ch3")).define("ch3",["Generators","viewof ch3"],(a,o)=>a.input(o)),n.variable(t()).define(["ch3"],sr),n.variable(t("checkbox")).define("checkbox",["input","html"],lr),n.variable(t("numberDemo")).define("numberDemo",["md"],cr),n.variable(t("viewof h")).define("viewof h",["number"],dr),n.variable(t("h")).define("h",["Generators","viewof h"],(a,o)=>a.input(o)),n.variable(t()).define(["h"],ur),n.variable(t("viewof h1")).define("viewof h1",["number"],pr),n.variable(t("h1")).define("h1",["Generators","viewof h1"],(a,o)=>a.input(o)),n.variable(t()).define(["h1"],fr),n.variable(t("number")).define("number",["input"],mr),n.variable(t("passwordDemo")).define("passwordDemo",["md"],hr),n.variable(t("viewof i")).define("viewof i",["password"],gr),n.variable(t("i")).define("i",["Generators","viewof i"],(a,o)=>a.input(o)),n.variable(t()).define(["i"],vr),n.variable(t("viewof i1")).define("viewof i1",["password"],yr),n.variable(t("i1")).define("i1",["Generators","viewof i1"],(a,o)=>a.input(o)),n.variable(t()).define(["i1"],br),n.variable(t("password")).define("password",["input"],_r),n.variable(t()).define(["md"],xr),n.variable(t("input")).define("input",["html","d3format"],wr),n.variable(t("d3geo")).define("d3geo",["require"],Ar),n.variable(t("d3format")).define("d3format",["require"],Cr),n.variable(t("topojson")).define("topojson",["require"],Sr),n.variable(t("world")).define("world",kr),n.variable(t("land")).define("land",["topojson","world"],Mr),n.variable(t("countries")).define("countries",["topojson","world"],Dr),n.variable(t("usa")).define("usa",$r),n.variable(t("nation")).define("nation",["topojson","usa"],Er),n.variable(t("states")).define("states",["topojson","usa"],Ir),n.variable(t("graticule")).define("graticule",["d3geo"],Lr),n.variable(t("viewof license")).define("viewof license",["md"],Gr),n.variable(t("license")).define("license",["Generators","viewof license"],(a,o)=>a.input(o)),n.variable(t()).define(["md"],Nr),n}function Or(e,t){return e`# Range Slider

**Jump to:
[Examples](#doc_examples) | [Usage](#doc_usage) | [Changelog](#doc_changelog)**

This notebook implements a themable range input for lower and upper bounds.

<details>
<summary style="outline:none !important"><i>View a demonstration</i></summary>
<img src=https://i.imgur.com/KkHoemh.gif style="max-width:500px;border:1px solid #ddd">
</details>

Also provided is an optional light wrapper that mimics the widget APIs from Jeremy Ashkenas' [Inputs](https://observablehq.com/@jashkenas/inputs) notebook.

Import the slider factory into your notebook:
~~~js
import {rangeSlider} from '${t}'
~~~

`}function Br(e){return e`---
## Examples

Resize this slider's range by dragging either end, or drag the range as a whole to move it.
`}function Ur(e,t,n,a){return e({min:.5,max:3,value:this?this.value:[1,1.9],theme:t[n],color:a,format:".0%",title:"The optional title",description:"The optional description."})}function Vr(e){return e`The widget value is an array containing the selected min and max value.`}function Tr(e){return e}function qr(e){return e`Below are some controls to modify the example slider. Why don't you ...`}function Pr(e,t){return e({title:'<span style="font-family:var(--serif);font-size:initial">... pick a different theme ...',options:Object.keys(t),value:"Flat"})}function zr(e){return e({title:'<span style="font-family:var(--serif);font-size:initial">... or range color?',value:"#3b99fc"})}function jr(e){return e`---
## Usage

Create a slider (all properties are optional):
`}function Fr(e,t){return e({title:"My slider title",description:"My slider description.",min:.5,max:3,value:[1,1.9],theme:t,color:"hsl(20, 100%, 40%)",format:".0%"})}function Yr(e){return e`Available configuration options are listed below.`}function Hr(e,t,n){return e(t,{description:n`
*Inputs* widget with an API similar to [\`slider()\`](https://observablehq.com/@jashkenas/inputs#slider).

Supports all [<code>rangeInput()</code>](#doc_rangeInput) options. Additionally the following options are supported:
${Object.entries({title:"Title above widget, string. Optional.",description:"Description below widget, string. Optional.",submit:"Display submit button to apply changes, boolean. Optional, defaults to <code>false</code>.",getValue:"Value callback, Function. Optional, defaults to <code>n => n.value.map(roundToPrecision)</code>.",color:"CSS color for range. Optional, overrides theme's default color.",separator:'Value separator. Optional, defaults to <code>" \u2026 "</code>.',precision:"Number of decimals as Number. Optional, defaults to <code>3</code>.",format:"Display format as [d3-format](https://github.com/d3/d3-format) string or Function. Optional, defaults to <code>v => v</code>.",display:"Display formatter as Function. Optional, defaults to <code>v => v.map(format).join(separator)</code>"}).map(([a,o])=>`- \`${a}:\` ${o}
`)}`})}function Qr(e,t,n,a){return function(i={}){const{min:r=0,max:l=1,step:s="any",value:c,color:p,theme:g}=i,h=e({min:r,max:l,step:s,value:c,theme:g});p&&(h.style.color=p);const{precision:y=3,format:v=G=>G,display:f,separator:m=" \u2026 "}=i,u=(G=>(G=10**G,O=>Math.round(O*G)/G))(y),x=typeof v=="function"?v:t.format(v),D=f||(G=>G.map(x).join(m)),{title:C,description:L,submit:b,getValue:A=G=>G.value.map(u)}=i,M=n({title:C,description:L,submit:b,display:D,getValue:A,form:Object.assign(a`<form>${h}`,{input:h})});return M.querySelector("output").style.display="inline-block",M}}function Wr(e,t,n){return e(t,{description:n`
Basic input implementation. Supports custom themes.

Options:
${Object.entries({min:"Minimum value, number. Optional, defaults to <code>0</code>.",max:"Maximum value, number. Optional, defaults to <code>100</code>.",step:"Range step, number. Optional, defaults to <code>1</code>.",value:"Lower and upper range bounds, array of number. Optional, defaults to <code>[min, max]</code>.",theme:"Widget CSS, string. Optional, defaults to [<code>theme_Flat</code>](#doc_theme_Flat)."}).map(([a,o])=>`- \`${a}:\` ${o}
`)}

`})}function Xr(e,t,n,a,o,i){return function(l={}){const{min:s=0,max:c=100,step:p=1,value:g=[s,c],theme:h=e}=l,y={},v=t(),f=n.element("input",{type:"range",min:s,max:c,step:p}),m=a`<div class="${v} range-slider" style="--range-min:10px;--range-max:80px">
  ${y.track=a`<div class="range-track">
    ${y.zone=a`<div class="range-track-zone">
      ${y.range=a`<div class="range-select" tabindex=0>
        ${y.min=a`<div class="thumb thumb-min" tabindex=0>`}
        ${y.max=a`<div class="thumb thumb-max" tabindex=0>`}
      `}
    `}
  `}
  ${a`<style>${h.replace(/:scope\b/g,"."+v)}`}
</div>`;let u=[];Object.defineProperty(m,"value",{get:()=>[...u],set:([k,E])=>{u=x(k,E),D()}});const x=(k,E)=>(k=isNaN(k)?s:(f.value=k,f.valueAsNumber),E=isNaN(E)?c:(f.value=E,f.valueAsNumber),[Math.min(k,E),Math.max(k,E)]),D=()=>{const k=E=>(E-s)/(c-s);m.style.setProperty("--range-min",`${k(u[0])*100}%`),m.style.setProperty("--range-max",`${k(u[1])*100}%`)},C=(k,E)=>{const[T,j]=u;u=x(k,E),D(),(T!==u[0]||j!==u[1])&&m.dispatchEvent(new CustomEvent("input",{bubbles:!0}))};C(...g);const L=new Map([[y.min,(k,E)=>{const T=o(s,E[1],E[0]+k*(c-s));C(T,E[1])}],[y.max,(k,E)=>{const T=o(E[0],c,E[1]+k*(c-s));C(E[0],T)}],[y.range,(k,E)=>{const T=E[1]-E[0],j=o(s,c-T,E[0]+k*(c-s));C(j,j+T)}]]),b=k=>k.touches?k.touches[0]:k,A=(k,E)=>k.split(" ").map(T=>document.addEventListener(T,E,{passive:!1})),M=(k,E)=>k.split(" ").map(T=>document.removeEventListener(T,E,{passive:!1}));let G,O,P,z=!1;function U(k){if(!k.buttons&&!k.touches){Y();return}z=!0;const E=y.zone.getBoundingClientRect().width;k.preventDefault(),L.get(P)((b(k).clientX-G)/E,O)}function Y(k){M("mousemove touchmove",U),M("mouseup touchend",Y)}return i.then(Y),m.ontouchstart=m.onmousedown=k=>{z=!1,!!L.has(k.target)&&(A("mousemove touchmove",U),A("mouseup touchend",Y),k.preventDefault(),k.stopPropagation(),P=k.target,G=b(k).clientX,O=u.slice())},y.track.onclick=k=>{if(z)return;const E=y.zone.getBoundingClientRect(),T=o(0,1,(b(k).clientX-E.left)/E.width),j=s+T*(c-s),[ee,te]=u,H=te-ee;j<ee?C(j,j+H):j>te&&C(j-H,j)},m}}function Kr(e){return e`---
## Themes
`}function Zr(e){return e("theme_Flat",{name:"theme_Flat",description:"Default theme. An unshaded version of [`theme_GoogleChrome_MacOS1013`](#doc_theme_GoogleChrome_MacOS1013)."})}function Jr(){return`
:scope {
  position: relative;
  display: inline-block;
  width: 240px;
  --thumb-size: 15px;
  --thumb-radius: calc(var(--thumb-size) / 2);
  padding: var(--thumb-radius) 0;
  color: #3b99fc;
  margin: 2px;
  vertical-align: middle;
}
:scope .range-track {
  box-sizing: border-box;
  position: relative;
  height: 7px;
  background-color: hsl(0, 0%, 80%);
  overflow: visible;
  border-radius: 4px;
  padding: 0 var(--thumb-radius);
}
:scope .range-track-zone {
  box-sizing: border-box;
  position: relative;
}
:scope .range-select {
  box-sizing: border-box;
  position: relative;
  left: var(--range-min);
  width: calc(var(--range-max) - var(--range-min));
  cursor: ew-resize;
  background: currentColor;
  height: 7px;
  border: inherit;
}
/* Expands the hotspot area. */
:scope .range-select:before {
  content: "";
  position: absolute;
  width: 100%;
  height: var(--thumb-size);
  left: 0;
  top: calc(2px - var(--thumb-radius));
}
:scope .range-select:focus,
:scope .thumb:focus {
  outline: none;
}
:scope .thumb {
  box-sizing: border-box;
  position: absolute;
  width: var(--thumb-size);
  height: var(--thumb-size);

  background: #fcfcfc;
  top: -4px;
  border-radius: 100%;
  border: 1px solid hsl(0,0%,55%);
  cursor: default;
  margin: 0;
}
:scope .thumb:active {
  box-shadow: inset 0 var(--thumb-size) #0002;
}
:scope .thumb-min {
  left: calc(-1px - var(--thumb-radius));
}
:scope .thumb-max {
  right: calc(-1px - var(--thumb-radius));
}
`}function es(e){return e("theme_GoogleChrome_MacOS1013",{name:"theme_GoogleChrome_MacOS1013",description:"Matches the style of range inputs in Google Chrome on macOS 10.13."})}function ts(){return`
:scope {
  position: relative;
  display: inline-block;
  width: 240px;
  --thumb-size: 15px;
  --thumb-radius: calc(var(--thumb-size) / 2);
  padding: var(--thumb-radius) 0;
  color: #3b99fc;
  margin: 2px;
  vertical-align: middle;
}
:scope .range-track {
  box-sizing: border-box;
  position: relative;
  height: 5px;
  background-color: hsl(0, 0%, 80%);
  box-shadow: inset 0 1px 3px -1px rgba(0,0,0,0.33);
  overflow: visible;
  border-radius: 3px;
  border: 1px inset hsl(0, 0%, 70%);
  padding: 0 var(--thumb-radius);
}
:scope .range-track-zone {
  box-sizing: border-box;
  position: relative;
}
:scope .range-select {
  box-sizing: border-box;
  position: relative;
  left: var(--range-min);
  width: calc(var(--range-max) - var(--range-min));
  cursor: ew-resize;
  background: currentColor;
  height: 5px;
  top: -1px;
  border: inherit;
}
/* Expands the hotspot area. */
:scope .range-select:before {
  content: "";
  position: absolute;
  width: 100%;
  height: var(--thumb-size);
  left: 0;
  top: calc(2px - var(--thumb-radius));
}
:scope .range-select:focus,
:scope .thumb:focus {
  outline: none;
}
:scope .thumb {
  box-sizing: border-box;
  position: absolute;
  width: var(--thumb-size);
  height: var(--thumb-size);

  background: #eee linear-gradient(0deg, #fff0 50%, #fff9 50%, #fff5);
  top: -5px;
  border-radius: 100%;
  border: 1px solid hsl(0,0%,55%);
  cursor: default;
  margin: 0;
}
:scope .thumb:active {
  box-shadow: inset 0 var(--thumb-size) #0002;
}
:scope .thumb-min {
  left: calc(-1px - var(--thumb-radius));
}
:scope .thumb-max {
  right: calc(-1px - var(--thumb-radius));
}
`}function ns(e){return e("theme_Retro1",{name:"theme_Retro1",description:"Minimal theme that showcases the bare requirements."})}function os(){return`
:scope {
  position: relative;
  display: inline-block;
  width: 240px;
  color: #3b99fc;
  vertical-align: -10px;
  margin: 2px;
}
:scope .range-track {
  height: 20px;
  border: 2px solid #000;
  padding: 0 18px;
  position: relative;
  background: #fff url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAPUlEQVQoU2NkYGD4z8DAwMiAH/wnpACunWyFIGeAAIYB6ALYFILFiLGaaIXY3YIrlLBZjdVDIIXoAY7VQwD4rQoH9uQ3nwAAAABJRU5ErkJggg==");
}
:scope .range-track-zone {
  position: relative;
  height: 100%;
}
:scope .range-select {
  box-sizing: border-box;
  position: relative;
  left: var(--range-min);
  width: calc(var(--range-max) - var(--range-min));
  height: 100%;
  cursor: ew-resize;
  background: currentColor url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAK0lEQVQoU2NkwA/+g6QZqaEIbAY2k8BWIMuRrQjDmTCTMKxAVkmSIrwhAQBStQYIBYnwugAAAABJRU5ErkJggg==") fixed;
}
:scope .range-select:focus,
:scope .thumb:focus {
  outline: none;
}
:scope .thumb {
  box-sizing: border-box;
  position: absolute;
  height: 100%;
  top: 0;
  width: 20px;
  background: #fff;
  border: 2px solid #000;
  border-width: 0 2px;
  cursor: default;
}
:scope .thumb:active {
  background: #000;
}
:scope .thumb-min {
  left: -20px;
}
:scope .thumb-max {
  right: -20px;
}
`}function as(e){return e("theme_NoUiSlider",{name:"theme_NoUiSlider",description:"Replicates the style of the [noUiSlider library](https://refreshless.com/nouislider/examples/)."})}function is(){return`
:scope {
  box-sizing: border-box;
  display: inline-block;
  width: 240px;
  color: #3b99fc;
  vertical-align: middle;
}

:scope .range-track {
  box-sizing: border-box;
  margin: 10px 17px;
  position: relative;
  background: #FAFAFA;
  border-radius: 4px;
  border: 1px solid #D3D3D3;
  box-shadow: inset 0 1px 1px #F0F0F0, 0 3px 6px -5px #BBB;
  height: 18px;
}
:scope .range-select {
  box-sizing: border-box;
  position: absolute;
  background: currentColor;
  left: var(--range-min);
  width: calc(var(--range-max) - var(--range-min));
  height: 100%;
  cursor: ew-resize;
}
:scope .thumb {
  box-sizing: border-box;
  position: absolute;
  width: 34px;
  height: 28px;
  top: -6px;
  border: 1px solid #D9D9D9;
  border-radius: 3px;
  background: #FFF;
  cursor: default;
  box-shadow: inset 0 0 1px #FFF, inset 0 1px 7px #EBEBEB, 0 3px 6px -3px #BBB;
}
:scope .thumb:before,
:scope .thumb:after {
  content: "";
  display: block;
  position: absolute;
  height: 14px;
  width: 1px;
  background: #E8E7E6;
  left: 14px;
  top: 6px;
}
:scope .thumb:after {
  left: 17px;
}
:scope .thumb-min {
  left: -17px;
}
:scope .thumb-max {
  right: -17px;
}
`}function rs(e){return e`---
## Helpers
`}function ss(){return function(t="scope-"){return t+(performance.now()+Math.random()).toString(32).replace(".","-")}}function ls(){return function(t,n,a){return a<t?t:a>n?n:a}}function cs(e,t,n,a){return{Flat:e,"Chrome macOS":t,noUiSlider:n,Retro:a}}function ds(){return async function(t,n,a){const[{Runtime:o},{default:i}]=await Promise.all([Se(()=>import("https://cdn.jsdelivr.net/npm/@observablehq/runtime/dist/runtime.js"),[]),Se(()=>import(`https://api.observablehq.com/${t}.js?v=3`),[])]),r=(c,p)=>Object.fromEntries(Object.entries(c).map(p));let l;a&&(l=r(a,([c,p])=>[c,()=>p]));const s=new o(l).module(i);return Object.fromEntries(await Promise.all(n.map(c=>s.value(c).then(p=>[c,p]))))}}function us(){return(e=>fetch(`https://api.observablehq.com/${e}.js?v=1`).then(t=>t.text()).then(t=>"@"+t.match(/\n\/\/ Version:\s+(\d+)/)[1]).catch(t=>"").then(t=>e+t))("@mootari/range-slider")}function ps(e){return e`---
## Optional Dependencies

The basic implementation \`rangeInput()\` has no additional dependencies.
`}async function fs(e,t,n,a,o,i){return(await e("@mootari/signature",["signature"],{require:t,html:n,DOM:a,md:o,Generators:i})).signature}function ms(e){return e`---
## Demo Dependencies`}function hs(e){const t=(n,a="")=>`${n} ([${a||"latest"}](https://observablehq.com/@mootari/range-slider${a}))`;return e`
---

## Changelog
- ${t("2022-01-13")}:
  - Added setter to \`rangeInput()\` and \`interval()\`.
  - Fixed \`interval()\` events not bubbling.
- ${t("2021-12-31","@1208")}:
  - Added provisional \`interval()\` widget to match the style of Observable's \`Inputs\` library. Thanks to [Sylvain Lesage](https://observablehq.com/@severo) for suggesting the name!
  - Removed a few static imports.
- ${t("2020-03-27","@1004")}: Added new default theme "Flat", a more neutral version of the macOS Chrome theme. (via [Jed Fox](https://observablehq.com/@j-f1))
- ${t("2020-03-27","@930")}: Changelog start.
`}function gs(e){return e`---
## Remaining Tasks / Work in progress

*Code in this section is subject to change. Only import with a pinned version!*

- Options for min/max delta
- synthetic change event
- Keyboard controls
- Move non-default themes into separate notebook?
- Compare with control guidelines in https://material.io/components/sliders
- Add observablehq/inputs theme
`}function vs(e,t,n){return e.form([t(),t([.001,.002],{step:1e-4,label:"the label"}),t([0,1],{label:n`<strong>the label`})])}function ys(e){return e()}function bs(e){return e}function _s(e){return e.value=[NaN,3]}function xs(e){return e}function ws(e,t,n,a){return function(i=[],r={}){const[l=0,s=1]=i,{step:c=.001,label:p=null,value:g=[l,s]}=r,h=e.uid("scope").id,y=`
#${h} {
  font: 13px/1.2 var(--sans-serif);
  display: flex;
  align-items: baseline;
  flex-wrap: wrap;
  max-width: 100%;
  width: auto;
}
@media only screen and (min-width: 30em) {
  #${h} {
    flex-wrap: nowrap;
    width: 360px;
  }
}
#${h} .label {
  width: 120px;
  padding: 5px 0 4px 0;
  margin-right: 6.5px;
  flex-shrink: 0;
}
#${h} .form {
  display: flex;
  width: 100%;
}
#${h} .range {
  flex-shrink: 1;
  width: 100%;
}
#${h} .range-slider {
  width: 100%;
}
  `,v=t({min:l,max:s,value:[g[0],g[1]],step:c}),f=p!=null?n`<div class="label">${p instanceof a?p:e.text(p)}`:"",m=n`<output>`,u=n`<output>`,x=n`<div id=${h}>
${f}
<div class=form>
  <div class=range>
    ${v}<div class=range-output>${m} … ${u}</div>
  </div>
</div>
${n`<style>${y}`}
  `,D=()=>{m.value=v.value[0],u.value=v.value[1]};return v.oninput=D,D(),Object.defineProperty(x,"value",{get:()=>v.value,set:([C,L])=>{v.value=[C,L],D()}})}}function As(e,t){const n=e.module();n.variable(t()).define(["md","PINNED_SLUG"],Or),n.variable(t("doc_examples")).define("doc_examples",["md"],Br),n.variable(t("viewof test")).define("viewof test",["rangeSlider","themes","theme","color"],Ur),n.variable(t("test")).define("test",["Generators","viewof test"],(o,i)=>o.input(i)),n.variable(t()).define(["md"],Vr),n.variable(t()).define(["test"],Tr),n.variable(t()).define(["md"],qr),n.variable(t("viewof theme")).define("viewof theme",["radioWidget","themes"],Pr),n.variable(t("theme")).define("theme",["Generators","viewof theme"],(o,i)=>o.input(i)),n.variable(t("viewof color")).define("viewof color",["colorWidget"],zr),n.variable(t("color")).define("color",["Generators","viewof color"],(o,i)=>o.input(i)),n.variable(t("doc_usage")).define("doc_usage",["md"],jr),n.variable(t("viewof myValue")).define("viewof myValue",["rangeSlider","theme_NoUiSlider"],Fr),n.variable(t("myValue")).define("myValue",["Generators","viewof myValue"],(o,i)=>o.input(i)),n.variable(t()).define(["md"],Yr),n.variable(t()).define(["signature","rangeSlider","md"],Hr),n.variable(t("rangeSlider")).define("rangeSlider",["rangeInput","d3format","widget","html"],Qr),n.variable(t("doc_rangeInput")).define("doc_rangeInput",["signature","rangeInput","md"],Wr),n.variable(t("rangeInput")).define("rangeInput",["theme_Flat","randomScope","DOM","html","clamp","invalidation"],Xr),n.variable(t("doc_themes")).define("doc_themes",["md"],Kr),n.variable(t("doc_theme_Flat")).define("doc_theme_Flat",["signature"],Zr),n.variable(t("theme_Flat")).define("theme_Flat",Jr),n.variable(t("doc_theme_GoogleChrome_MacOS1013")).define("doc_theme_GoogleChrome_MacOS1013",["signature"],es),n.variable(t("theme_GoogleChrome_MacOS1013")).define("theme_GoogleChrome_MacOS1013",ts),n.variable(t("doc_theme_Retro1")).define("doc_theme_Retro1",["signature"],ns),n.variable(t("theme_Retro1")).define("theme_Retro1",os),n.variable(t("doc_theme_NoUiSlider")).define("doc_theme_NoUiSlider",["signature"],as),n.variable(t("theme_NoUiSlider")).define("theme_NoUiSlider",is),n.variable(t()).define(["md"],rs),n.variable(t("randomScope")).define("randomScope",ss),n.variable(t("clamp")).define("clamp",ls),n.variable(t("themes")).define("themes",["theme_Flat","theme_GoogleChrome_MacOS1013","theme_NoUiSlider","theme_Retro1"],cs),n.variable(t("lazyImport")).define("lazyImport",ds),n.variable(t("PINNED_SLUG")).define("PINNED_SLUG",us),n.variable(t()).define(["md"],ps);const a=e.module(Rr);return n.import("input","widget",a),n.import("d3format",a),n.import("color","colorWidget",a),n.import("radio","radioWidget",a),n.variable(t("signature")).define("signature",["lazyImport","require","html","DOM","md","Generators"],fs),n.variable(t()).define(["md"],ms),n.variable(t("doc_changelog")).define("doc_changelog",["md"],hs),n.variable(t()).define(["md"],gs),n.variable(t("viewof testInterval")).define("viewof testInterval",["Inputs","interval","html"],vs),n.variable(t("testInterval")).define("testInterval",["Generators","viewof testInterval"],(o,i)=>o.input(i)),n.variable(t("viewof foo")).define("viewof foo",["interval"],ys),n.variable(t("foo")).define("foo",["Generators","viewof foo"],(o,i)=>o.input(i)),n.variable(t()).define(["foo"],bs),n.variable(t()).define(["viewof foo"],_s),n.variable(t()).define(["testInterval"],xs),n.variable(t("interval")).define("interval",["DOM","rangeInput","html","Element"],ws),n}function Cs(e){return e`# Color Legend

A simple legend for a [color scale](/@d3/color-schemes). Supports [continuous](/@d3/continuous-scales), [sequential](/@d3/sequential-scales), [diverging](/@d3/diverging-scales), [quantize, quantile, threshold](/@d3/quantile-quantize-and-threshold-scales) and [ordinal](/@d3/d3-scaleordinal) scales. To use:

~~~js
import {Legend, Swatches} from "@d3/color-legend"
~~~

Then call the legend function as shown below. (For ordinal scales, also consider the swatches function.)`}function Ss(e,t){return e(t.scaleSequential([0,100],t.interpolateViridis),{title:"Temperature (\xB0F)"})}function ks(e,t){return e(t.scaleSequentialSqrt([0,1],t.interpolateTurbo),{title:"Speed (kts)"})}function Ms(e,t){return e(t.scaleDiverging([-.1,0,.1],t.interpolatePiYG),{title:"Daily change",tickFormat:"+%"})}function Ds(e,t){return e(t.scaleDivergingSqrt([-.1,0,.1],t.interpolateRdBu),{title:"Daily change",tickFormat:"+%"})}function $s(e,t){return e(t.scaleSequentialLog([1,100],t.interpolateBlues),{title:"Energy (joules)",ticks:10})}function Es(e,t){return e(t.scaleSequentialQuantile(t.range(100).map(()=>Math.random()**2),t.interpolateBlues),{title:"Quantile",tickFormat:".2f"})}function Is(e,t){return e(t.scaleSqrt([-100,0,100],["blue","white","red"]),{title:"Temperature (\xB0C)"})}function Ls(e,t){return e(t.scaleQuantize([1,10],t.schemePurples[9]),{title:"Unemployment rate (%)"})}function Gs(e,t){return e(t.scaleQuantile(t.range(1e3).map(t.randomNormal(100,20)),t.schemeSpectral[9]),{title:"Height (cm)",tickFormat:".0f"})}function Ns(e,t){return e(t.scaleThreshold([2.5,3.1,3.5,3.9,6,7,8,9.5],t.schemeRdBu[9]),{title:"Unemployment rate (%)",tickSize:0})}function Rs(e,t){return e(t.scaleOrdinal(["<10","10-19","20-29","30-39","40-49","50-59","60-69","70-79","\u226580"],t.schemeSpectral[10]),{title:"Age (years)",tickSize:0})}function Os(e){return e`But wait, there’s more!

How about swatches for ordinal color scales? Both variable-width swatches and [column layout](https://developer.mozilla.org/en-US/docs/Web/CSS/columns) are supported.`}function Bs(e,t){return e(t.scaleOrdinal(["blueberries","oranges","apples"],t.schemeCategory10))}function Us(e,t){return e(t.scaleOrdinal(["Wholesale and Retail Trade","Manufacturing","Leisure and hospitality","Business services","Construction","Education and Health","Government","Finance","Self-employed","Other"],t.schemeTableau10),{columns:"180px"})}function Vs(e){return e`---

## Implementation`}function Ts(e){return function(n,{title:a,tickSize:o=6,width:i=320,height:r=44+o,marginTop:l=18,marginRight:s=0,marginBottom:c=16+o,marginLeft:p=0,ticks:g=i/64,tickFormat:h,tickValues:y}={}){function v(x,D=256){const C=document.createElement("canvas");C.width=D,C.height=1;const L=C.getContext("2d");for(let b=0;b<D;++b)L.fillStyle=x(b/(D-1)),L.fillRect(b,0,1,1);return C}const f=e.create("svg").attr("width",i).attr("height",r).attr("viewBox",[0,0,i,r]).style("overflow","visible").style("display","block");let m=x=>x.selectAll(".tick line").attr("y1",l+c-r),u;if(n.interpolate){const x=Math.min(n.domain().length,n.range().length);u=n.copy().rangeRound(e.quantize(e.interpolate(p,i-s),x)),f.append("image").attr("x",p).attr("y",l).attr("width",i-p-s).attr("height",r-l-c).attr("preserveAspectRatio","none").attr("xlink:href",v(n.copy().domain(e.quantize(e.interpolate(0,1),x))).toDataURL())}else if(n.interpolator){if(u=Object.assign(n.copy().interpolator(e.interpolateRound(p,i-s)),{range(){return[p,i-s]}}),f.append("image").attr("x",p).attr("y",l).attr("width",i-p-s).attr("height",r-l-c).attr("preserveAspectRatio","none").attr("xlink:href",v(n.interpolator()).toDataURL()),!u.ticks){if(y===void 0){const x=Math.round(g+1);y=e.range(x).map(D=>e.quantile(n.domain(),D/(x-1)))}typeof h!="function"&&(h=e.format(h===void 0?",f":h))}}else if(n.invertExtent){const x=n.thresholds?n.thresholds():n.quantiles?n.quantiles():n.domain(),D=h===void 0?C=>C:typeof h=="string"?e.format(h):h;u=e.scaleLinear().domain([-1,n.range().length-1]).rangeRound([p,i-s]),f.append("g").selectAll("rect").data(n.range()).join("rect").attr("x",(C,L)=>u(L-1)).attr("y",l).attr("width",(C,L)=>u(L)-u(L-1)).attr("height",r-l-c).attr("fill",C=>C),y=e.range(x.length),h=C=>D(x[C],C)}else u=e.scaleBand().domain(n.domain()).rangeRound([p,i-s]),f.append("g").selectAll("rect").data(n.domain()).join("rect").attr("x",u).attr("y",l).attr("width",Math.max(0,u.bandwidth()-1)).attr("height",r-l-c).attr("fill",n),m=()=>{};return f.append("g").attr("transform",`translate(0,${r-c})`).call(e.axisBottom(u).ticks(g,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(o).tickValues(y)).call(m).call(x=>x.select(".domain").remove()).call(x=>x.append("text").attr("x",p).attr("y",l+c-r-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(a)),f.node()}}function qs(e){return function(o){var i=o,{color:n}=i,a=xe(i,["color"]);return e(n,a)}}function Ps(e,t){return function(a,{columns:o=null,format:i,unknown:r,swatchSize:l=15,swatchWidth:s=l,swatchHeight:c=l,marginLeft:p=0}={}){const g=`-swatches-${Math.random().toString(16).slice(2)}`,h=r==null?void 0:a.unknown(),y=h==null||h===e.scaleImplicit?[]:[h],v=a.domain().concat(y);return i===void 0&&(i=f=>f===h?r:f),o!==null?t.html`<div style="display: flex; align-items: center; margin-left: ${+p}px; min-height: 33px; font: 10px sans-serif;">
  <style>

.${g}-item {
  break-inside: avoid;
  display: flex;
  align-items: center;
  padding-bottom: 1px;
}

.${g}-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: calc(100% - ${+s}px - 0.5em);
}

.${g}-swatch {
  width: ${+s}px;
  height: ${+c}px;
  margin: 0 0.5em 0 0;
}

  </style>
  <div style=${{width:"100%",columns:o}}>${v.map(f=>{const m=`${i(f)}`;return t.html`<div class=${g}-item>
      <div class=${g}-swatch style=${{background:a(f)}}></div>
      <div class=${g}-label title=${m}>${m}</div>
    </div>`})}
  </div>
</div>`:t.html`<div style="display: flex; align-items: center; min-height: 33px; margin-left: ${+p}px; font: 10px sans-serif;">
  <style>

.${g} {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}

.${g}::before {
  content: "";
  width: ${+s}px;
  height: ${+c}px;
  margin-right: 0.5em;
  background: var(--color);
}

  </style>
  <div>${v.map(f=>t.html`<span class="${g}" style="--color: ${a(f)}">${i(f)}</span>`)}</div>`}}function zs(e){return function(o){var i=o,{color:n}=i,a=xe(i,["color"]);return e(n,a)}}function js(e,t){const n=e.module();return n.variable(t()).define(["md"],Cs),n.variable(t()).define(["Legend","d3"],Ss),n.variable(t()).define(["Legend","d3"],ks),n.variable(t()).define(["Legend","d3"],Ms),n.variable(t()).define(["Legend","d3"],Ds),n.variable(t()).define(["Legend","d3"],$s),n.variable(t()).define(["Legend","d3"],Es),n.variable(t()).define(["Legend","d3"],Is),n.variable(t()).define(["Legend","d3"],Ls),n.variable(t()).define(["Legend","d3"],Gs),n.variable(t()).define(["Legend","d3"],Ns),n.variable(t()).define(["Legend","d3"],Rs),n.variable(t()).define(["md"],Os),n.variable(t()).define(["Swatches","d3"],Bs),n.variable(t()).define(["Swatches","d3"],Us),n.variable(t()).define(["md"],Vs),n.variable(t("Legend")).define("Legend",["d3"],Ts),n.variable(t("legend")).define("legend",["Legend"],qs),n.variable(t("Swatches")).define("Swatches",["d3","htl"],Ps),n.variable(t("swatches")).define("swatches",["Swatches"],zs),n}function Fs(e){return e`# [Integration] Berggruen Observable+Vue Scatterplot
`}function Ys(e){return e.html`<select>
<option>g7</option>
<option>g20</option>
<option>eu</option>
<option>oecd</option>
<option>asean</option>
<option>global_south</option>
<optgroup label="Income level">
  <option>Low income</option>
  <option>Lower middle income</option>
  <option>Upper middle income</option>
  <option>High income</option>
</optgroup>
<optgroup label="UN Region">
  <option>Asia</option>
  <option>Africa</option>
  <option>Europe</option>
  <option>Americas</option>
  <option>Oceania</option>
</optgroup>`}function Hs(e){return e([2e3,2019],{step:1,label:"Year range"})}function Qs(e){return e({label:"y index",value:"qol"})}function Ws(e,t){return e({label:"x index",value:t.get("x")})}function Xs(e,t,n){return e.radio(t,{label:"group",value:n.get("group")||"g7"})}function Ks(e){return e("X axis range")}function Zs(e){return e("Y axis range")}function Js(e){return e.checkbox(["show X average line"])}function el(e){return e.checkbox(["show Y average line"])}function tl(e){return e.checkbox(["debug"])}function nl(e,t){const n=e.html`<div>`;return Object.assign(n,{update(a,o){for(;n.firstChild;)n.removeChild(n.firstChild);a.domain()[0]!==a.domain()[1]&&n.appendChild(t(a,o))}})}function ol(e,t,n,a,o){return e.select(new Map([...t.filter(n,i=>a(i.scode,o)).map(i=>[i.name,i.scode])]),{label:"Highlighted",multiple:!0})}function al(e,t){return e.update(t)}function il(e,t,n,a,o,i,r,l,s,c,p,g,h,y){const v=e.create("svg").attr("width",t).attr("height",n),f=e.scaleLinear().domain([0,100]).range([a.left,t-a.right]),m=e.scaleLinear().domain([0,100]).range([n-a.bottom,a.top]),u=o.uid("clip");v.append("defs").append("clipPath").attr("id",u.id).append("rect").attr("x",a.left).attr("y",a.top).attr("width",t-a.left-a.right).attr("height",n-a.top-a.bottom);const x=i(v,{xScale:f}),D=r(v,{yScale:m}),C=l(v,u),L=s(v,u),b=c(),A=p(v),M=g(v);function G(O){const{x:P,y:z,years:U,xDomain:Y,yDomain:k,highlight:E,filter:T,debug:j=!1,showXAverage:ee,showYAverage:te}=O,H=v.transition().duration(750),$=Array.from(e.group(h.filter(T),B=>B.country,B=>B.year)).map(B=>({country:B[0],x1:B[1].get(U[0])[0][P],y1:B[1].get(U[0])[0][z],x2:B[1].get(U[1])[0][P],y2:B[1].get(U[1])[0][z]})),ce=Y.value?Y.value:[e.min($,B=>Math.min(B.x1,B.x2)),e.max($,B=>Math.max(B.x1,B.x2))],be=k.value?k.value:[e.min($,B=>Math.min(B.y1,B.y2)),e.max($,B=>Math.max(B.y1,B.y2))];f.domain(y(ce,.1)),m.domain(y(be,.1));const _e=b($,z);x({x:P,t:H}),D({y:z,t:H}),A({t:H,showXAverage:ee,xScale:f,yScale:m,x:P,y:z,bgi:h,years:U}),M({t:H,showYAverage:te,xScale:f,yScale:m,x:P,y:z,bgi:h,years:U}),C({t:H,svg:v,data:$,xScale:f,yScale:m,highlight:E,color:_e,years:U}),L({t:H,svg:v,data:$,xScale:f,yScale:m,highlight:E,debug:j,highlight:E})}return Object.assign(v.node(),{update:G})}function rl(){return function([t,n],a){const o=(n-t)*a/2;return[t-o,n+o]}}function sl(e,t,n,a,o,i,r,l,s,c){return{x:e,y:t,xDomain:n,yDomain:a,years:o,highlight:i,filter:r,debug:l,showXAverage:s,showYAverage:c}}function ll(e,t){return n=>e(n.country,t)}function cl(e){return e.length===0?null:t=>e.includes(t.country)}function dl(){return function(t,n){console.debug(t,n)}}function ul(){return 600}function pl(e){return e}function fl(){return 3e3}function ml(e){return!!e.length}function hl(e){return!!e.length}function gl(e){return e`## Appendix`}function vl(e){return e`### Component cells`}function yl(){return{top:20,right:20,bottom:50,left:50}}function bl(e,t,n,a){return function(){return(i,r)=>{const l=e.min(i,g=>g.y2-g.y1),s=e.max(i,g=>g.y2-g.y1),c=Math.max(Math.abs(l),Math.abs(s)),p=e.scaleSequential([-c,c],t);return n.update(p,{title:`Change in ${a[r]}`}),p}}}function _l(e,t,n,a){return function(i,{xScale:r}){const l=e.axisBottom(r),s=i.append("g").attr("transform",`translate(0,${t-n.bottom})`),c=s.append("text").attr("transform",`translate(${n.left})`).attr("font-size","16px").attr("font-weight",700).attr("fill","#2E6DB1").attr("y",n.bottom-4).attr("text-anchor","start").text("");return({x:p,t:g})=>{c.text(`${a[p]} \u2192`),s.transition(g).call(l),s.select(".domain").remove(),s.selectAll(".guideline").remove(),s.selectAll(".tick line").clone().attr("class","guideline").attr("y2",n.top+n.bottom-t).attr("stroke","#CACCCE"),s.selectAll(".tick text").attr("color","#888888").attr("font-size","12px").attr("font-weight",600)}}}function xl(e){return function(n){const a=n.append("g"),o=a.append("line").attr("class","x-average"),i=a.append("text").attr("font-size","12px").style("cursor","pointer");let r=!1;return({showXAverage:l,xScale:s,yScale:c,bgi:p,x:g,y:h,years:y,t:v})=>{if(!l){o.transition(v).attr("y2",o.attr("y1")),i.transition(v).attr("fill-opacity",0);return}const f=e.mean(p.filter(m=>m.year===y[1]),m=>m[g]);!r&&l?(o.attr("x1",s(f)).attr("x2",s(f)).attr("y1",c.range()[0]).attr("y2",c.range()[0]).transition(v).attr("y2",c.range()[1]).attr("stroke","black").attr("stroke-dasharray","4 4"),i.attr("transform",`translate(${s(f)-6}, ${c.range()[0]}) rotate(-90)`).transition(v).attr("fill-opacity",1).attr("text-anchor","start").attr("alignment-baseline","baseline").text(`Global Average ${y[0]!==y[1]?`(${y[1]})`:""}`)):(o.transition(v).attr("x1",s(f)).attr("x2",s(f)).attr("y1",c.range()[0]).attr("y2",c.range()[1]).attr("stroke","black").attr("stroke-dasharray","4 4"),i.transition(v).attr("fill-opacity",1).attr("transform",`translate(${s(f)-6}, ${c.range()[0]}) rotate(-90)`).attr("text-anchor","start").attr("alignment-baseline","baseline").text(`Global Average ${y[0]!==y[1]?`(${y[1]})`:""}`)),r=l}}}function wl(e,t,n,a,o){return function(r,{yScale:l}){const s=e.axisLeft(l),c=r.append("g").attr("transform",`translate(${t.left}, 0)`).attr("color","#999999"),p=r.append("text").attr("transform","rotate(-90)").attr("font-size","16px").attr("font-weight",700).attr("fill","#2E6DB1").attr("x",-n+t.bottom).attr("y",15).attr("text-anchor","start").text("");return({y:g,t:h})=>{p.text(`${a[g]} \u2192`),c.transition(h).call(s),c.select(".domain").remove(),c.selectAll(".guideline").remove(),c.selectAll(".tick line").clone().attr("class","guideline").attr("x2",o-t.left-t.right).attr("stroke","#CACCCE"),c.selectAll(".tick text").attr("color","#888888").attr("font-size","12px").attr("font-weight",600)}}}function Al(e){return function(n){const a=n.append("g"),o=a.append("line").attr("class","y-average"),i=a.append("text").attr("font-size","12px").attr("tabindex","-1").style("cursor","pointer");let r=!1;return({showYAverage:l,xScale:s,yScale:c,bgi:p,x:g,y:h,years:y,t:v})=>{if(!l){o.transition(v).attr("x2",o.attr("x1")),i.transition(v).attr("fill-opacity",0);return}const f=e.mean(p.filter(m=>m.year===y[1]),m=>m[h]);!r&&l?(o.attr("x1",s.range()[0]).attr("x2",s.range()[0]).attr("y1",c(f)).attr("y2",c(f)).transition(v).attr("x2",s.range()[1]).attr("stroke","black").attr("stroke-dasharray","4 4"),i.attr("transform",`translate(${s.range()[1]}, ${c(f)+2})`).transition(v).attr("fill-opacity",1).attr("text-anchor","end").attr("alignment-baseline","hanging").text(`Global Average ${y[0]!==y[1]?`(${y[1]})`:""}`)):(o.transition(v).attr("x1",s.range()[0]).attr("x2",s.range()[1]).attr("y1",c(f)).attr("y2",c(f)).attr("stroke","black").attr("stroke-dasharray","4 4"),i.transition(v).attr("fill-opacity",1).attr("transform",`translate(${s.range()[1]}, ${c(f)+2})`).attr("text-anchor","end").attr("alignment-baseline","hanging").text(`Global Average ${y[0]!==y[1]?`(${y[1]})`:""}`)),r=l}}}function Cl(e,t,n,a,o,i,r){return function(s,c){const p=s.append("g").attr("clip-path",c);return({t:g,data:h,xScale:y,yScale:v,debug:f,highlight:m})=>{const x=e.Delaunay.from(h.map(b=>[y(b.x2),v(b.y2)])).voronoi([-1,-1,t+1,n+1]),D=h.map((b,A)=>{let M;try{M=x.cellPolygon(A)}catch{}if(!M)return{hide:!0,orient:()=>{}};const[G,O]=[y(b.x2),v(b.y2)],[P,z]=e.polygonCentroid(M),U=(Math.round(Math.atan2(z-O,P-G)/Math.PI*2)+4)%4;return{x:G,y:O,label:a.get(b.country).name,country:b.country,hide:m&&m(b)?!1:-e.polygonArea(M)<o,orient:U===0?i.right:U===3?i.top:U===1?i.bottom:i.left}}).sort((b,A)=>e.ascending(b.hide,A.hide));p.selectAll("path.debug").data(f?[null]:[]).join(b=>b.append("path").attr("class","debug").attr("fill","none").attr("stroke","#ccc").attr("d",x.render()),b=>b.attr("d",x.render()),b=>b.remove()),p.selectAll("path.centroid").data(f?D:[]).join(b=>b.append("path").attr("class","centroid").attr("stroke","orange").attr("d",(A,M)=>`M${e.polygonCentroid(x.cellPolygon(M))}L${A.x},${A.y}`),b=>b.attr("d",(A,M)=>`M${e.polygonCentroid(x.cellPolygon(M))}L${A.x},${A.y}`),b=>b.remove());const C=m?b=>m(b)?"#202020":"#888888cc":"#202020",L=m?b=>m(b)?"700":"400":"500";p.selectAll("text.country-label").data(D,b=>b.country).join(b=>b.append("text").attr("class","country-label").style("cursor","pointer").on("click",(A,M)=>r(A,M.country)).on("keypress",(A,M)=>A.keyCode===13&&r(A,M.country)).attr("font-size",".9rem").attr("fill",C).attr("font-weight",L).attr("tabindex",A=>A.hide?-1:1).attr("opacity",0).attr("x",A=>A.x).attr("y",A=>A.y).each(function(A,M){e.select(this).call(A.orient,g)}).text(A=>A.hide?"":A.label).call(A=>A.transition(g).attr("opacity",M=>M.hide?0:1)),b=>b.call(A=>A.attr("fill",C).attr("font-weight",L).attr("tabindex",M=>M.hide?-1:1).transition(g).attr("opacity",M=>M.hide?0:1).text(M=>M.hide?"":M.label).attr("x",M=>M.x).attr("y",M=>M.y).each(function(M,G){e.select(this).call(M.orient,g)})),b=>b.transition(g).attr("opacity",0).remove())}}}function Sl(){return{top:(e,t)=>e.transition(t).attr("text-anchor","middle").attr("dy",-8),right:(e,t)=>e.transition(t).attr("text-anchor","start").attr("dy",6).attr("dx",6),bottom:(e,t)=>e.transition(t).attr("text-anchor","middle").attr("dy",12),left:(e,t)=>e.transition(t).attr("text-anchor","end").attr("dy",6).attr("dx",-6)}}function kl(e,t){return function(a,o){const i=a.append("g").attr("clip-path",o);return({t:r,xScale:l,yScale:s,highlight:c,color:p,data:g,years:h})=>{function y(f){return h[0]===h[1]?c===null||c(f)?e:"#ccc":p(f.y2-f.y1)}i.selectAll("circle.begin").data(g,f=>f.country).join(f=>f.append("circle").attr("class","begin").on("click",(m,u)=>{t(m,u.country)}).call(m=>m.append("title").text(u=>u.country)).style("cursor","pointer").attr("r",0).call(m=>m.attr("cx",u=>l(u.x1)).attr("cy",u=>s(u.y1)).transition(r).attr("r",h[0]===h[1]?3:2).attr("fill",y)),f=>f.call(m=>m.transition(r).attr("r",h[0]===h[1]?3:2).attr("fill",y).attr("cx",u=>l(u.x1)).attr("cy",u=>s(u.y1))),f=>f.transition(r).attr("r",0).remove());const v=h[0]===h[1]?[]:g.map(f=>{const m=l(f.x1),u=l(f.x2),x=s(f.y1),D=s(f.y2);let C=Math.atan2(D-x,u-m);const L=60*(Math.PI/180)/2,b=8,M=C+0,G=M+L,O=M-L,P=u-b*Math.cos(G),z=D-b*Math.sin(G),U=u-b*Math.cos(O),Y=D-b*Math.sin(O);return{x1:m,x2:u,y1:x,y2:D,x3:P,x4:U,y3:z,y4:Y,country:f.country,color:p(f.y2-f.y1)}});i.selectAll("line.arrowhead-left").data(v,f=>`${f.country}`).join(f=>f.append("line").attr("class","arrowhead-left").on("click",(m,u)=>{t(m,u.country)}).style("cursor","pointer").attr("stroke-width",2).attr("stroke",m=>m.color).attr("opacity",0).attr("x1",m=>m.x2).attr("y1",m=>m.y2).attr("x2",m=>m.x3).attr("y2",m=>m.y3).call(m=>m.transition(r).attr("opacity",1)),f=>f.call(m=>m.transition(r).attr("stroke",u=>u.color).attr("opacity",1).attr("x1",u=>u.x2).attr("y1",u=>u.y2).attr("x2",u=>u.x3).attr("y2",u=>u.y3)),f=>f.transition().attr("opacity",0).remove()),i.selectAll("line.arrowhead-right").data(v,f=>`${f.country}`).join(f=>f.append("line").attr("class","arrowhead-right").on("click",(m,u)=>{t(m,u.country)}).style("cursor","pointer").attr("stroke-width",2).attr("stroke",m=>m.color).attr("x1",m=>m.x2).attr("y1",m=>m.y2).attr("x2",m=>m.x4).attr("y2",m=>m.y4).attr("opacity",0).call(m=>m.transition(r).attr("opacity",1)),f=>f.call(m=>m.transition(r).attr("opacity",1).attr("stroke",u=>u.color).attr("x1",u=>u.x2).attr("y1",u=>u.y2).attr("x2",u=>u.x4).attr("y2",u=>u.y4)),f=>f.transition().attr("opacity",0).remove()),i.selectAll("line.arrow").data(g,f=>`${f.country}`).join(f=>f.append("line").attr("title",m=>m.country).attr("class","arrow").on("click",(m,u)=>{t(m,u.country)}).style("cursor","pointer").attr("stroke-width",2).attr("stroke",m=>p(m.y2-m.y1)).attr("x1",m=>l(m.x1)).attr("y1",m=>s(m.y1)).attr("x2",m=>l(m.x2)).attr("y2",m=>s(m.y2)).attr("opacity",0).call(m=>m.transition(r).attr("opacity",1)),f=>f.call(m=>m.transition(r).attr("opacity",1).attr("stroke",u=>p(u.y2-u.y1)).attr("x1",u=>l(u.x1)).attr("y1",u=>s(u.y1)).attr("x2",u=>l(u.x2)).attr("y2",u=>s(u.y2))),f=>f.transition().attr("opacity",0).remove())}}}function Ml(e){return e`### Data`}function Dl(e){return e("bgi.2022-04-18.csv").csv({typed:!0})}function $l(e){return e("countries.2022-04-18.csv").csv({typed:!0})}function El(e){return new Set(e.map(t=>t.income))}function Il(e){return e`### Colors`}function Ll(){return"#2B2DB6"}function Gl(e){return e`### Utils`}function Nl(e){return e.piecewise(e.interpolateRgb.gamma(1),["#A60000","#C4BCC7","#006DB7"])}function Rl(e){return!!e.length}function Ol(e,t){return(n,a)=>e.get(n)[a]||e.get(n).income===t(a)||e.get(n).region===a}function Bl(e,t){return n=>e.filter(a=>t(a.country,n))}function Ul(){return e=>({"Low income":1,"Lower middle income":2,"Upper middle income":3,"High income":4})[e]}function Vl(e,t){return n=>e.select(t,F({},n))}function Tl(){return new Map([["Quality of Democracy","qod"],["Institutional Accountability","instaccount"],["Electoral Accountability","elecaccount"],["Societal Accountability","socaccount"],["Quality of Government","qog"],["Fiscal Capacity","fisccap"],["Coordination Capacity","coordcap"],["Delivery Capacity","delivcap"],["Quality of Life","qol"],["Social Public Goods","soclife"],["Economic Public Goods","econlife"],["Environmental Public Goods","envlife"]])}function ql(e){return Object.fromEntries(Array.from(e.keys()).map(t=>[e.get(t),t]))}function Pl(e){return new Map(e.map(t=>[t.scode,t]))}function zl(e){return function(n,a){n.value=a,n.dispatchEvent(new e("input"))}}function jl(e,t,n){return a=>{const{id:o}=e.uid("scale");let i,r;const l=t.html`<div style="display: flex; grid-gap: 1rem;">
  <div>
    ${a}
  </div>
  <div>
    ${i=t.html`<input type="checkbox" id=${o} name=${o} checked></input>`}
    <label for=${o}>Scale to data</label>
  </div>
  ${r=n({min:0,max:100,step:1})}`;return r.style.display="none",i.addEventListener("input",s=>{s.target.checked?(r.style.display="none",l.value={value:void 0},l.dispatchEvent(new CustomEvent("input"))):(r.style.display="block",l.value={value:r.value},l.dispatchEvent(new CustomEvent("input")))}),l.value={value:void 0},r.addEventListener("input",s=>{s.stopPropagation(),l.value={value:r.value},l.dispatchEvent(new CustomEvent("input"))}),l}}function Fl(e,t){return new e(t.search)}function Yl(){return["g7","g20","eu","oecd","asean","global_south","Low income","Lower middle income","Upper middle income","High income","Asia","Africa","Europe","Americas","Oceania"]}function Hl(e,t){const n=e.module(),a=new Map([]);n.builtin("FileAttachment",e.fileAttachments(r=>a.get(r))),n.variable(t()).define(["md"],Fs),n.variable(t()).define(["htl"],Ys),n.variable(t("viewof years")).define("viewof years",["interval"],Hs),n.variable(t("years")).define("years",["Generators","viewof years"],(r,l)=>r.input(l)),n.variable(t("viewof y")).define("viewof y",["big3Native"],Qs),n.variable(t("y")).define("y",["Generators","viewof y"],(r,l)=>r.input(l)),n.variable(t("viewof x")).define("viewof x",["big3Native","params"],Ws),n.variable(t("x")).define("x",["Generators","viewof x"],(r,l)=>r.input(l)),n.variable(t("viewof group")).define("viewof group",["Inputs","groupValues","params"],Xs),n.variable(t("group")).define("group",["Generators","viewof group"],(r,l)=>r.input(l)),n.variable(t("viewof xDomain")).define("viewof xDomain",["scale"],Ks),n.variable(t("xDomain")).define("xDomain",["Generators","viewof xDomain"],(r,l)=>r.input(l)),n.variable(t("viewof yDomain")).define("viewof yDomain",["scale"],Zs),n.variable(t("yDomain")).define("yDomain",["Generators","viewof yDomain"],(r,l)=>r.input(l)),n.variable(t("viewof xAverageRadio")).define("viewof xAverageRadio",["Inputs"],Js),n.variable(t("xAverageRadio")).define("xAverageRadio",["Generators","viewof xAverageRadio"],(r,l)=>r.input(l)),n.variable(t("viewof yAverageRadio")).define("viewof yAverageRadio",["Inputs"],el),n.variable(t("yAverageRadio")).define("yAverageRadio",["Generators","viewof yAverageRadio"],(r,l)=>r.input(l)),n.variable(t("viewof d")).define("viewof d",["Inputs"],tl),n.variable(t("d")).define("d",["Generators","viewof d"],(r,l)=>r.input(l)),n.variable(t("legend")).define("legend",["htl","Legend"],nl),n.variable(t("viewof highlighted")).define("viewof highlighted",["Inputs","d3","countries","countryInGroup","group"],ol),n.variable(t("highlighted")).define("highlighted",["Generators","viewof highlighted"],(r,l)=>r.input(l)),n.variable(t("update")).define("update",["chart","updateData"],al),n.variable(t("chart")).define("chart",["d3","width","height","margin","DOM","xAxis","yAxis","arrows","labels","colorLegend","xAverage","yAverage","bgi","padLinear"],il),n.variable(t("padLinear")).define("padLinear",rl),n.variable(t("updateData")).define("updateData",["x","y","xDomain","yDomain","years","highlight","filter","debug","showXAverage","showYAverage"],sl),n.variable(t("filter")).define("filter",["countryInGroup","group"],ll),n.variable(t("highlight")).define("highlight",["highlighted"],cl),n.variable(t("onCountryClick")).define("onCountryClick",dl),n.variable(t("width")).define("width",ul),n.variable(t("height")).define("height",["width"],pl),n.variable(t("LABEL_VORONOI_AREA_THRESHOLD")).define("LABEL_VORONOI_AREA_THRESHOLD",fl),n.variable(t("showYAverage")).define("showYAverage",["yAverageRadio"],ml),n.variable(t("showXAverage")).define("showXAverage",["xAverageRadio"],hl),n.variable(t()).define(["md"],gl),n.variable(t()).define(["md"],vl),n.variable(t("margin")).define("margin",yl),n.variable(t("colorLegend")).define("colorLegend",["d3","legendColorScale","legend","indexLabels"],bl),n.variable(t("xAxis")).define("xAxis",["d3","height","margin","indexLabels"],_l),n.variable(t("xAverage")).define("xAverage",["d3"],xl),n.variable(t("yAxis")).define("yAxis",["d3","margin","height","indexLabels","width"],wl),n.variable(t("yAverage")).define("yAverage",["d3"],Al),n.variable(t("labels")).define("labels",["d3","width","height","countryLookup","LABEL_VORONOI_AREA_THRESHOLD","orient","onCountryClick"],Cl),n.variable(t("orient")).define("orient",Sl),n.variable(t("arrows")).define("arrows",["dotColor","onCountryClick"],kl),n.variable(t()).define(["md"],Ml),n.variable(t("bgi")).define("bgi",["FileAttachment"],Dl),n.variable(t("countries")).define("countries",["FileAttachment"],$l),n.variable(t()).define(["countries"],El),n.variable(t()).define(["md"],Il),n.variable(t("dotColor")).define("dotColor",Ll),n.variable(t()).define(["md"],Gl),n.variable(t("legendColorScale")).define("legendColorScale",["d3"],Nl),n.variable(t("debug")).define("debug",["d"],Rl),n.variable(t("countryInGroup")).define("countryInGroup",["countryLookup","income"],Ol),n.variable(t("dataForGroup")).define("dataForGroup",["bgi","countryInGroup"],Bl),n.variable(t("income")).define("income",Ul),n.variable(t("big3Native")).define("big3Native",["Inputs","big3"],Vl),n.variable(t("big3")).define("big3",Tl),n.variable(t("indexLabels")).define("indexLabels",["big3"],ql),n.variable(t("countryLookup")).define("countryLookup",["countries"],Pl),n.variable(t("set")).define("set",["Event"],zl),n.variable(t("scale")).define("scale",["DOM","htl","rangeSlider"],jl),n.variable(t("params")).define("params",["URLSearchParams","location"],Fl),n.variable(t("groupValues")).define("groupValues",Yl);const o=e.module(As);n.import("rangeSlider",o),n.import("interval",o);const i=e.module(js);return n.import("Legend",i),n.import("Swatches",i),n}const{mapState:Ql}=J("scatterplot"),Be=Ve(null),Wl={name:"ScatterplotViz",data:function(){return{indexMap:he,windowWidth:window.innerWidth}},created(){window.addEventListener("resize",this.onResize)},destroyed(){window.removeEventListener("resize",this.onResize)},computed:F({},Ql(["x","y","years","xDomain","yDomain","countries","selectedCountry","showAverageLines"])),methods:{redefine:function(e,t){Be._rawValue.redefine(e,t)},filterCountries:function(e){if(e===null||e.length===0){this.redefine("filter",()=>()=>!0);return}const t=new Set(e);this.redefine("filter",()=>n=>t.has(n.country))},highlightCountry:function(e){e?this.redefine("highlight",()=>t=>t.country===e):this.redefine("highlight",null)},onResize(e){this.windowWidth=window.innerWidth}},mounted:function(){const e=Object.assign(new Te,{d3:qe}),t=new Pe(e);Be.value=t.module(Hl,n=>{if(n==="chart")return new Ae(this.$refs.viz);if(n==="legend")return new Ae(this.$refs.legend);if(n==="update")return{pending(){},fulfilled(){},rejected(a){console.error(a)}}}),this.redefine("indexLabels",this.indexMap),this.redefine("countries",[]),this.redefine("bgi",[]),pe("./data/countries.2022-04-18.csv",fe).then(n=>{this.redefine("countries",n)}),pe("./data/bgi.2022-04-18.csv",fe).then(n=>{this.redefine("bgi",n)}),this.redefine("width",this.windowWidth*2/3-20),this.redefine("height",this.$refs.viz.clientHeight),this.redefine("x",this.x),this.redefine("y",this.y),this.redefine("years",this.years),this.redefine("xDomain",this.xDomain),this.redefine("yDomain",this.yDomain),this.filterCountries(this.countries),this.highlightCountry(this.selectedCountry),this.redefine("showYAverage",this.showAverageLines),this.redefine("showXAverage",this.showAverageLines),this.redefine("dotColor","#006DB7"),this.redefine("onCountryClick",()=>(n,a)=>{this.$store.commit("scatterplot/setSelectedCountry",a)})},watch:{x:function(e){this.redefine("x",e)},y:function(e){this.redefine("y",e)},years:function(e){this.redefine("years",e)},xDomain:function(e){this.redefine("xDomain",e)},yDomain:function(e){this.redefine("yDomain",e)},countries:function(e){this.filterCountries(e)},selectedCountry:function(e){this.highlightCountry(e)},showAverageLines:function(e){this.redefine("showYAverage",e),this.redefine("showXAverage",e)},windowWidth:function(e){this.redefine("width",e),this.redefine("width",e*2/3-20)}}},Xl={class:"fr-ns fr-m fr-l"},Kl={style:{height:"4rem",display:"flex","justify-content":"space-between"}},Zl={key:0},Jl={key:1},ec={ref:"legend",id:"legend-container"},tc={ref:"viz",class:"viz-container"};function nc(e,t,n,a,o,i){return _(),S("div",Xl,[d("div",Kl,[d("div",null,[e.years[0]!==e.years[1]?(_(),S("h3",Zl," Change in "+w(e.indexMap[e.x])+" vs. "+w(e.indexMap[e.y])+" from "+w(e.years[0])+" to "+w(e.years[1]),1)):(_(),S("h3",Jl,w(e.indexMap[e.x])+" vs. "+w(e.indexMap[e.y])+" in "+w(e.years[1]),1))]),d("div",ec,null,512)]),d("div",tc,null,512)])}var oc=q(Wl,[["render",nc],["__scopeId","data-v-a9c3bdf4"]]);const{mapState:ac,mapGetters:ic,mapMutations:rc,mapActions:sc}=J("story"),lc={name:"StoryStepperComponent",data:function(){return{showHelp:!0}},computed:F(F({},ac(["storyMode","currentStoryI","currentStepI"])),ic(["currentStory","hasPreviousStep","hasNextStep","currentStep","totalSteps","stories"])),mounted:function(){this.updateScatterplot()},methods:Z(F(F({},sc(["nextStep","previousStep"])),rc(["setStory"])),{updateScatterplot:function(){this.$store.commit("scatterplot/setYears",this.currentStep.years),this.$store.commit("scatterplot/setX",this.currentStep.x),this.$store.commit("scatterplot/setY",this.currentStep.y),this.$store.commit("scatterplot/setXDomain",this.currentStep.xDomain),this.$store.commit("scatterplot/setYDomain",this.currentStep.yDomain),this.$store.commit("scatterplot/setCountries",this.currentStep.filteredCountries),this.$store.commit("scatterplot/setSelectedCountry",this.currentStep.selectedCountry)},exit(){this.$store.commit("story/setStoryMode",!1),this.$store.commit("scatterplot/setSelectedCountry",this.currentStep.filteredCountries[0])}}),watch:{storyMode:function(e){e&&this.updateScatterplot()},currentStep(){this.storyMode&&this.updateScatterplot()}}},cc=e=>(X("data-v-63a79e00"),e=e(),K(),e),dc={class:"story-stepper"},uc={class:"story-stepper-header br3 br--top"},pc=["disabled"],fc={class:"step"},mc={class:"progress-bar-container"},hc={class:"step"},gc={key:0,class:"help"},vc=cc(()=>d("div",{class:"help-tip"}," \u25C0 ",-1)),yc={class:"help-text"},bc=V(" Click the previous and next arrows to move through the story. Select \u201CExit story\u201D button to leave story mode and enter explore mode. "),_c=["disabled"],xc={class:"story-stepper-content pa4"},wc={class:"flex items-center justify-between mb2"},Ac={class:"story-name p1 mh2 db"},Cc={class:"description mh2"};function Sc(e,t,n,a,o,i){return _(),S("div",dc,[d("div",uc,[d("button",{disabled:!e.hasPreviousStep,onClick:t[0]||(t[0]=(...r)=>e.previousStep&&e.previousStep(...r))},"\u2190",8,pc),d("div",fc,w(this.currentStepI+1),1),d("div",mc,[d("div",{class:"progress-bar",style:se("width: "+(this.currentStepI+1)/this.totalSteps*100+"%")},null,4)]),d("div",hc,w(this.totalSteps),1),e.currentStepI===0&&e.showHelp?(_(),S("div",gc,[vc,d("div",yc,[bc,d("button",{class:"close-help material-icons-round",onClick:t[1]||(t[1]=r=>e.showHelp=!1)}," close ")])])):R("",!0),d("button",{disabled:!e.hasNextStep,onClick:t[2]||(t[2]=(...r)=>e.nextStep&&e.nextStep(...r))},"\u2192",8,_c)]),d("div",xc,[d("div",wc,[d("span",Ac,w(e.currentStory),1),d("button",{class:"fr exit mh2 mb2",onClick:t[3]||(t[3]=(...r)=>i.exit&&i.exit(...r))},"Exit story")]),d("div",Cc,w(e.currentStep.beatDescription),1)])])}var kc=q(lc,[["render",Sc],["__scopeId","data-v-63a79e00"]]),We="/2022-governance-index/images/icons/close.png";const Mc={name:"AboutModal",props:{},data:function(){return{}},computed:{},mounted:function(){},methods:{hideModal:function(){this.$store.commit("setAboutModal",!1)}}},Xe=e=>(X("data-v-17fd62e2"),e=e(),K(),e),Dc=Xe(()=>d("section",{class:"modal-bg"},null,-1)),$c={class:"modal-content pa4 f4"},Ec=le('<h1 class="modal-title" data-v-17fd62e2>About the 2022 Berggruen Governance Index</h1><h2 class="first-subsection" data-v-17fd62e2>Understanding the Indices</h2><p class="measure-wide" data-v-17fd62e2> The 2022 Berggruen Governance Index consists of three major indices: Quality of Government, Quality of Democracy, and Quality of Life. All three contain more specific sub-indices, which are formed by aggregating individual indicators. Each index interacts with the other two to form the overall governance picture. Our analytical model sees Quality of Democracy as affecting both Quality of Life and Quality of Government, which in turn also shapes Quality of Life. </p><h2 data-v-17fd62e2>COVID-19 in the Data</h2><p class="measure-wide" data-v-17fd62e2> The COVID-19 crisis caused unprecedented chaos in the world\u2019s financial markets and other key sources of statistical data. As a result of this, data from 2020 onward is often unrepresentative of longer-term trends. Accordingly, we include data up to and including 2019. </p><h2 data-v-17fd62e2>The Team</h2><div class="column-container mw9 center ph3-ns" data-v-17fd62e2><div class="cell-container cf ph2-ns" data-v-17fd62e2><div class="cell fl w-100 w-50-ns pa2" data-v-17fd62e2><h5 data-v-17fd62e2>UCLA</h5><b data-v-17fd62e2>Helmut K Anheier</b>, Principal Investigator<br data-v-17fd62e2><b data-v-17fd62e2>Markus Lang</b>, Research Scientist<br data-v-17fd62e2><b data-v-17fd62e2>Edward Knudsen</b>, Research Associate<br data-v-17fd62e2><b data-v-17fd62e2>Olga Kononykhina</b>, Data Analyst<br data-v-17fd62e2><b data-v-17fd62e2>Regina A. List</b>, Editor<br data-v-17fd62e2></div><div class="cell fl w-100 w-50-ns pa2" data-v-17fd62e2><h5 data-v-17fd62e2>Berggruen Institute</h5><b data-v-17fd62e2>Dawn Nakagawa</b>, Executive Vice President <br data-v-17fd62e2><b data-v-17fd62e2>Nicole Grunwald Silver</b>, Senior Program Manager <br data-v-17fd62e2><b data-v-17fd62e2>Ann Scott Root</b>, Analyst <br data-v-17fd62e2><b data-v-17fd62e2>Adam Rosenblum</b>, Associate Director of Communications, Information Architect <br data-v-17fd62e2><b data-v-17fd62e2>Jane Keller</b>, Creative Director <br data-v-17fd62e2><b data-v-17fd62e2>Rachel Bauch</b>, Senior Director of Public Relations <br data-v-17fd62e2><b data-v-17fd62e2>Christopher Eldred</b>, Public Relations Manager <br data-v-17fd62e2></div></div></div><h2 data-v-17fd62e2>Data and Methodology</h2><p class="measure-wide" data-v-17fd62e2> Each dimension is measured by aggregating individual indicators into sub-indices, which then form QoG, QoD, and QoL. We have been careful to only select indicators that are regularly updated and available over long periods of time. For the aggregation of sub-indices and indices, we use Bayesian latent variable models. Our dataset covers the 2000-2019 period and includes 134 countries. </p><p data-v-17fd62e2>Have feedback? <a href="https://www.berggruen.org/work/the-planetary/2022-berggruen-governance-index-feedback/" data-v-17fd62e2>Share your thoughts on the Explorer</a>.</p><p class="credit-text" data-v-17fd62e2><i data-v-17fd62e2>Site built by <a href="https://www.stamen.com" data-v-17fd62e2>Stamen Design</a>.</i></p>',11),Ic=Xe(()=>d("img",{src:We,alt:"Close"},null,-1)),Lc=[Ic];function Gc(e,t,n,a,o,i){return _(),S("section",{class:"modal",ref:"modal",tabindex:"0",onKeyup:t[2]||(t[2]=je((...r)=>i.hideModal&&i.hideModal(...r),["esc"]))},[d("div",{class:"clickoutUnderlay",onClick:t[0]||(t[0]=(...r)=>i.hideModal&&i.hideModal(...r))}),Dc,d("section",$c,[Ec,d("button",{class:"close-modal-button",onClick:t[1]||(t[1]=(...r)=>i.hideModal&&i.hideModal(...r))},Lc)])],544)}var Nc=q(Mc,[["render",Gc],["__scopeId","data-v-17fd62e2"]]),ye="/2022-governance-index/images/icons/rightArrow.png";const Rc={name:"ExportModal",props:{},computed:{},mounted:function(){},methods:{hideModal:function(){this.$store.commit("setExportModal",!1)},downloadPDF:function(){const e=document.createElement("a");e.href="./public/data/bgi_codebook.pdf",e.download="bgi_codebook.pdf",document.body.appendChild(e),e.click(),document.body.removeChild(e)},openExecSum:function(){window.open("https://berggruen.org/2022-governance-index/reports/berggruen-executive-summary-web.pdf")},openFullReport:function(){window.open("https://berggruen.org/2022-governance-index/reports/berggruen-index-report-web.pdf")},downloadCSV:function(){window.open("https://berggruen.org/2022-governance-index/reports/bgi2022_dataset.csv")},openCodebook:function(){window.open("https://berggruen.org/2022-governance-index/reports/bgi_codebook.pdf")}}},ae=e=>(X("data-v-16a76b40"),e=e(),K(),e),Oc=ae(()=>d("section",{class:"modal-bg"},null,-1)),Bc={class:"modal-content pa4 f4"},Uc=ae(()=>d("h1",null,"What would you like to do?",-1)),Vc={class:"button-container"},Tc=V(" View the full report "),qc=ae(()=>d("div",{class:"arrow-container"},[d("img",{src:ye,alt:"download"})],-1)),Pc=[Tc,qc],zc={class:"button-container"},jc=V(" View the executive summary "),Fc=ae(()=>d("div",{class:"arrow-container"},[d("img",{src:ye,alt:"download"})],-1)),Yc=[jc,Fc],Hc={class:"button-container"},Qc=V(" Download the full dataset "),Wc=ae(()=>d("div",{class:"arrow-container"},[d("img",{src:ye,alt:"download"})],-1)),Xc=[Qc,Wc],Kc={class:"button-container"},Zc=V(" View the codebook "),Jc=ae(()=>d("div",{class:"arrow-container"},[d("img",{src:ye,alt:"download"})],-1)),ed=[Zc,Jc],td=ae(()=>d("img",{src:We,alt:"Close"},null,-1)),nd=[td];function od(e,t,n,a,o,i){return _(),S("section",{class:"modal",ref:"modal",tabindex:"0",onKeyup:t[6]||(t[6]=je((...r)=>i.hideModal&&i.hideModal(...r),["esc"]))},[d("div",{class:"clickoutUnderlay",onClick:t[0]||(t[0]=(...r)=>i.hideModal&&i.hideModal(...r))}),Oc,d("section",Bc,[Uc,d("div",Vc,[d("button",{class:"download-button",onClick:t[1]||(t[1]=(...r)=>i.openFullReport&&i.openFullReport(...r))},Pc)]),d("div",zc,[d("button",{class:"download-button",onClick:t[2]||(t[2]=(...r)=>i.openExecSum&&i.openExecSum(...r))},Yc)]),d("div",Hc,[d("button",{class:"download-button",onClick:t[3]||(t[3]=(...r)=>i.downloadCSV&&i.downloadCSV(...r))},Xc)]),d("div",Kc,[d("button",{class:"download-button",onClick:t[4]||(t[4]=(...r)=>i.openCodebook&&i.openCodebook(...r))},ed)]),d("button",{class:"close-modal-button",onClick:t[5]||(t[5]=(...r)=>i.hideModal&&i.hideModal(...r))},nd)])],544)}var ad=q(Rc,[["render",od],["__scopeId","data-v-16a76b40"]]);const{mapState:id}=J("scatterplot"),rd={name:"ExplorerView",props:{},components:{HeaderComponent:$t,SidebarComponent:wa,ScatterplotViz:oc,InfoBoxComponent:Cn,StoryStepper:kc,AboutModal:Nc,ExportModal:ad},data:function(){return{}},computed:Z(F({},id(["selectedCountry"])),{storyMode:function(){return this.$store.state.story.storyMode},showAbout:function(){return this.$store.state.aboutModal},showExport:function(){return this.$store.state.exportModal}}),mounted:function(){if(this.$route.params.story!==""&&this.$route.params.story!==void 0&&!isNaN(+this.$route.params.story)){this.$store.commit("story/setStoryMode",!0),this.$store.commit("story/setStory",+this.$route.params.story);return}const e=new URLSearchParams(location.search);if(window.history.pushState({},document.title,window.location.pathname),e.has("x")&&this.$store.commit("scatterplot/setX",e.get("x")),e.has("y")&&this.$store.commit("scatterplot/setY",e.get("y")),e.has("y1")&&e.has("y2")&&this.$store.commit("scatterplot/setYears",[+e.get("y1"),+e.get("y2")]),e.has("countries")){const t=JSON.parse(e.get("countries"));this.$store.commit("scatterplot/setCountries",t)}},watch:{"$route.params.story":function(e,t){!e||(this.$store.commit("story/setStoryMode",!0),isNaN(+this.$route.params.story)||this.$store.commit("story/setStory",+this.$route.params.story))}}},sd={style:{display:"flex","flex-flow":"column",height:"calc(100vh - 75px)","min-width":"600px","<!-- min-height":"fit-content","-->\n        <!-- overflow":"hidden","-->\n        padding-left":"1rem"}},ld={class:"fl-l fl-m fl-ns w-100 pa2",style:{flex:"1 1 auto"}};function cd(e,t,n,a,o,i){const r=N("AboutModal"),l=N("ExportModal"),s=N("HeaderComponent"),c=N("SidebarComponent"),p=N("ScatterplotViz"),g=N("InfoBoxComponent"),h=N("StoryStepper");return _(),S("section",null,[ne(I(r,{class:"about-modal"},null,512),[[Le,i.showAbout]]),ne(I(l,{class:"export-modal"},null,512),[[Le,i.showExport]]),I(s),I(c,{id:"sidebarComponent",class:"fl-ns w-third-l scroll-auto",style:{height:"calc(100vh - 75px)"}}),d("div",sd,[I(p,{class:"fl-l fl-m fl-ns w-100 pa2",style:{flex:"1 1 200px"}}),d("div",ld,[i.storyMode?(_(),Q(h,{key:1,class:"infobox fr w-100 bg-white br2"})):(_(),Q(g,{key:0,class:ze(["infobox fr",{dn:!this.selectedCountry}])},null,8,["class"]))])])])}var dd=q(rd,[["render",cd]]);const ud=[{path:"/explorer/:story?",name:"Explorer",component:dd},{path:"/",name:"LandingView",component:()=>Se(()=>import("./LandingView.4fe0e85d.js"),["assets/LandingView.4fe0e85d.js","assets/LandingView.7011d896.css","assets/vendor.04b2ad9c.js"])}],pd=ot({history:at(),routes:ud}),fd={namespaced:!0,state(){return{x:"qog",y:"qol",xDomain:{value:[0,100]},yDomain:{value:[0,100]},years:[2019,2019],selectedCountry:"USA",countries:["ARG","AUS","BRA","CAN","CHN","DEU","FRA","GBR","IDN","IND","ITA","JPN","KOR","MEX","RUS","SAU","TUR","USA","ZAF"],showAverageLines:!0}},getters:{hasQodConflict(e){let t=!1;return e.x==="qod"?(e.y==="instaccount"||e.y==="elecaccount"||e.y==="socaccount")&&(t=!0):e.y==="qod"&&(e.x==="instaccount"||e.x==="elecaccount"||e.x==="socaccount")&&(t=!0),t},hasQogConflict(e){let t=!1;return e.x==="qog"?(e.y==="fisccap"||e.y==="coordcap"||e.y==="delivcap")&&(t=!0):e.y==="qog"&&(e.x==="fisccap"||e.x==="coordcap"||e.x==="delivcap")&&(t=!0),t},hasQolConflict(e){let t=!1;return e.x==="qol"?(e.y==="socpubgoods"||e.y==="econpubgoods"||e.y==="envpubgoods")&&(t=!0):e.y==="qol"&&(e.x==="socpubgoods"||e.x==="econpubgoods"||e.x==="envpubgoods")&&(t=!0),t}},mutations:{setX(e,t){e.x=t},setY(e,t){e.y=t},setXDomain(e,t){e.xDomain=t},setYDomain(e,t){e.yDomain=t},setYears(e,t){e.years=t},setSelectedCountry(e,t){e.selectedCountry=t},setCountries(e,t){e.countries=t},setShowAverageLines(e,t){e.showAverageLines=t}}},md={namespaced:!0,state(){return{storyMode:!1,currentStoryI:0,currentStepI:0}},getters:{hasNextStep(e){return e.currentStepI<ie[e.currentStoryI].steps.length-1},hasPreviousStep(e){return e.currentStepI>0},currentStory(e){return ie[e.currentStoryI].name},currentStep(e){return ie[e.currentStoryI].steps[e.currentStepI]},totalSteps(e){return ie[e.currentStoryI].steps.length},stories(e){return ie.map(t=>t.name)}},mutations:{setStoryMode(e,t){e.storyMode=t,t||(e.currentStepI=0)},previousStep(e){e.currentStepI-=1},nextStep(e){e.currentStepI+=1},setStoryStep(e,t){e.currentStepI=t},setStory(e,t){e.currentStoryI=t,e.currentStepI=0}},actions:{previousStep({getters:e,commit:t}){e.hasPreviousStep&&t("previousStep")},nextStep({getters:e,commit:t}){e.hasNextStep&&t("nextStep")}}};var hd=it({state(){return{indexNameMap:he,aboutModal:!1,exportModal:!1,mobileModal:!0}},mutations:{setAboutModal(e,t){e.aboutModal=t},toggleAboutModal(e){e.aboutModal=!e.aboutModal},setExportModal(e,t){e.exportModal=t},toggleExportModal(e){e.exportModal=!e.exportModal},setMobileModal(e,t){e.mobileModal=t},toggleMobileModal(e){e.mobileModal=!e.mobileModal}},modules:{scatterplot:fd,story:md}});rt(ut).use(hd).use(pd).mount("#app");export{Nc as A,ad as E,$t as H,q as _,We as a,He as d,he as i,ie as s};
