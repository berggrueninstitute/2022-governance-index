import{_ as G,i as ot,d as nt,a as st,s as it,H as at,A as rt,E as lt}from"./index.563b6ff3.js";import{j as dt,H as ct,R as ut,I as pt,l as Q,m as W,o as d,c,b as s,F as B,d as C,n as H,t as h,f as v,i as D,s as m,B as k,v as S,p as T,g as z,A as ft,r as w,a as y,w as U}from"./vendor.04b2ad9c.js";function ht(t){return t`# [INTEGRATION] Landing Page Dot Plot (D3)`}function mt(t){return t.select(["qol","qod","qog",null],{label:"soryBy",value:"qol"})}function _t(t){return t.range([2e3,2019],{step:1})}function yt(t,e,a,u,r,i,n,p){const g=t.length*20,b=16,l={top:40,bottom:50,left:12*b,right:20};function E(o,f){return e?+o[e]<+f[e]:a.get(o.country).localeCompare(a.get(f.country))}function _(o){return t.find(f=>f.scode===o).name}function A(o){return t.find(f=>f.name===o).scode}const M=u.sort(E).map(o=>o.country),F=3,O=1,Y=5,L=.6,$=r.create("svg").attr("width",`${i}`).attr("height",`${l.top+g+l.bottom}`),x=$.append("g").attr("transform",`translate(${l.left},${l.top})`),q=r.scaleLinear().domain([0,100]).range([0,i-l.left-l.right]),I=r.scalePoint().domain(M.map(o=>t.find(f=>f.scode===o).name)).range([0,g]),X=r.axisTop(q).ticks(6);$.append("g").attr("transform",`translate(${l.left},${l.top-Y})`).call(X).call(o=>o.select(".domain").remove()).call(o=>o.attr("color","#888888").attr("font-weight",500).attr("font-size",12));const Z=r.axisLeft(I),P=$.append("g").attr("transform",`translate(${l.left},${l.top})`).call(Z).call(o=>o.select(".domain").remove()).call(o=>o.selectAll("line").attr("stroke","transparent").attr("color","#202020").attr("font-size",b));P.selectAll(".tick").on("mouseenter",function(){r.select(this).select("text").transition(r.transition(250)).attr("font-weight",700)}).on("mouseleave",function(){r.select(this).select("text").transition(r.transition(250)).attr("font-weight",500)}).on("click",function(o){n(A(o.srcElement.textContent))}),P.selectAll(".tick").style("font-size",b).style("cursor","pointer");const tt=x.append("g"),R=g/(M.length-1);for(let o=0;o<M.length;o++)tt.append("rect").attr("x",0).attr("y",o*R-.5*O).attr("width",i-l.left-l.right).attr("height",O).attr("fill","#E9E9E9").attr("stroke","transparent").attr("stroke-width",.5*R-O).style("cursor","pointer").on("click",function(f){n(M[o])});const et=x.append("g"),j=(i-l.left-l.right)/100;for(let o=0;o<=100;o+=20)et.append("line").attr("y1",-Y).attr("y2",g+Y).attr("x1",o*j).attr("x2",o*j).attr("stroke","#E9E9E9").attr("stroke-width",O);return x.append("g").selectAll("circle").data(u).join("circle").attr("cx",o=>q(o.qod)).attr("cy",o=>I(_(o.country))).attr("r",F).attr("fill",p.qod).attr("fill-opacity",L).attr("stroke",p.qod).style("cursor","pointer").on("click",function(o){n(o.srcElement.__data__.country)}),x.append("g").selectAll("circle").data(u).join("circle").attr("cx",o=>q(o.qol)).attr("cy",o=>I(_(o.country))).attr("r",F).attr("fill",p.qol).attr("fill-opacity",L).attr("stroke",p.qol).style("cursor","pointer").on("click",function(o){n(o.srcElement.__data__.country)}),x.append("g").selectAll("circle").data(u).join("circle").attr("cx",o=>q(o.qog)).attr("cy",o=>I(_(o.country))).attr("r",F).attr("fill",p.qog).attr("fill-opacity",L).attr("stroke",p.qog).style("cursor","pointer").on("click",function(o){n(o.srcElement.__data__.country)}),$.node()}function vt(){return{qod:"#006DB7",qog:"#E44136",qol:"#33BAD3"}}function gt(){return function(e){console.log(e)}}function wt(t){return t`## Data`}function bt(t){return t("bgi.2022-04-18.csv").csv({typed:!0})}function xt(t){return t("countries.2022-04-18.csv").csv()}function kt(t){return t`The \`data\` cell contains the data that we care about for this viz - only 2019, sorted by the currently selected \`sortBy\` value`}function Mt(t,e,a,u){return t.filter(r=>r.year===e).sort((r,i)=>a.descending(r[u],i[u]))}function Ot(t){return new Map(t.map(e=>[e.scode,e.name]))}function $t(t){return t("d3")}function qt(t,e){const a=t.module(),u=new Map([]);return a.builtin("FileAttachment",t.fileAttachments(r=>u.get(r))),a.variable(e()).define(["md"],ht),a.variable(e("viewof sortBy")).define("viewof sortBy",["Inputs"],mt),a.variable(e("sortBy")).define("sortBy",["Generators","viewof sortBy"],(r,i)=>r.input(i)),a.variable(e("viewof year")).define("viewof year",["Inputs"],_t),a.variable(e("year")).define("year",["Generators","viewof year"],(r,i)=>r.input(i)),a.variable(e("chart")).define("chart",["countries","sortBy","countryName","data","d3","width","onCountrySelect","dotColors"],yt),a.variable(e("dotColors")).define("dotColors",vt),a.variable(e("onCountrySelect")).define("onCountrySelect",gt),a.variable(e()).define(["md"],wt),a.variable(e("bgi")).define("bgi",["FileAttachment"],bt),a.variable(e("countries")).define("countries",["FileAttachment"],xt),a.variable(e()).define(["md"],kt),a.variable(e("data")).define("data",["bgi","year","d3","sortBy"],Mt),a.variable(e("countryName")).define("countryName",["countries"],Ot),a.variable(e("d3")).define("d3",["require"],$t),a}const K=dt(null),It={name:"LandingDotPlot",props:{},data:function(){return{sortBy:"qol",indexMap:ot,descriptionMap:nt,range:ct,selectedYear:2019,dotColors:{qod:"#006DB7",qog:"#E44136",qol:"#33BAD3"},showYearOptions:!1,clickedOutsideYearDropdown:!1,showIndexOptions:!1,clickedOutsideIndexDropdown:!1,dotplotWidth:this.$nextTick(()=>this.$refs.dotplotContainer.clientWidth*.9)}},created(){window.addEventListener("resize",this.onResize)},destroyed(){window.removeEventListener("resize",this.onResize)},components:{},computed:{},mounted:function(){const t=new ut;K.value=t.module(qt,e=>{if(e==="chart")return new pt(this.$refs.chart)}),this.redefine("bgi",[]),this.redefine("countries",[]),Q("./data/countries.2022-04-18.csv",W).then(e=>{this.redefine("countries",e),this.redefine("onCountrySelect",()=>a=>{this.$store.commit("scatterplot/setSelectedCountry",a),this.$store.commit("scatterplot/setCountries",null),this.$store.commit("story/setStoryMode",!1),this.$router.push("/explorer")})}),Q("./data/bgi.2022-04-18.csv",W).then(e=>{this.redefine("bgi",e)}),this.redefine("width",this.dotplotWidth)},methods:{redefine:function(t,e){K._rawValue.redefine(t,e)},yearFocus(){},async yearFocusOut(){this.showYearOptions=!1,this.clickedOutsideYearDropdown=!0,setTimeout(()=>this.clickedOutsideYearDropdown=!1,200)},openYearOptions(){this.clickedOutsideYearDropdown||(this.showYearOptions=!0,this.$nextTick(()=>this.$refs.yearDropdown.focus())),this.clickedOutsideYearDropdown=!1},indexFocus(){},indexFocusOut(){this.showIndexOptions=!1,this.clickedOutsideIndexDropdown=!0,setTimeout(()=>this.clickedOutsideIndexDropdown=!1,200)},openIndexOptions(){this.clickedOutsideIndexDropdown||(this.showIndexOptions=!0,this.$nextTick(()=>this.$refs.indexDropdown.focus())),this.clickedOutsideIndexDropdown=!1},onResize(t){this.$nextTick(()=>this.dotplotWidth=this.$refs.dotplotContainer.clientWidth*.9)}},watch:{sortBy:function(t){this.redefine("sortBy",t),this.showIndexOptions=!1},selectedYear:function(t){this.redefine("year",t),this.showYearOptions=!1},dotplotWidth:function(t){console.log(t),this.redefine("width",t)}}},N=t=>(T("data-v-5c624f90"),t=t(),z(),t),Dt={style:{overflow:"hidden"}},Bt={class:"landing-dotplot-panel"},Ct=N(()=>s("h2",{class:"f4"},"Select a country to examine further",-1)),Et={class:"index-block"},At={class:"dot-container"},Ft={class:"index-text"},Yt={class:"flex justify-between"},Lt={class:"sort-by-description"},St=v(" Rankings sorted by "),Gt={class:"custom-select"},Tt={key:0,class:"material-icons-round dropdown-arrow"},zt={key:1,class:"material-icons-round dropdown-arrow"},Nt={class:"option"},Vt=["selected"],Pt=N(()=>s("label",{class:"radio-label",for:"name"}," Name ",-1)),Rt={class:"option"},jt=["value","id","selected"],Qt=["for"],Wt=v(" for "),Ht={class:"custom-select"},Ut={key:0,class:"material-icons-round dropdown-arrow"},Kt={key:1,class:"material-icons-round dropdown-arrow"},Jt={class:"option"},Xt=["value","id","selected"],Zt=["for"],te=N(()=>s("hr",null,null,-1)),ee={ref:"dotplotContainer",style:{display:"flex","overflow-y":"auto","overflow-x":"hidden"}},oe={ref:"chart"};function ne(t,e,a,u,r,i){return d(),c("section",Dt,[s("div",Bt,[Ct,(d(),c(B,null,C(["qol","qod","qog"],n=>s("div",{key:n},[s("div",Et,[s("div",At,[s("div",{class:"dot-fill",style:H({"background-color":t.dotColors[n]})},null,4),s("div",{class:"dot-border",style:H({"border-color":t.dotColors[n]})},null,4)]),s("div",Ft,[s("b",null,h(t.indexMap[n])+":",1),v(" "+h(t.descriptionMap[n]),1)])])])),64)),s("div",Yt,[s("div",Lt,[St,s("div",Gt,[s("div",{class:"selected-option sortby-button",onClick:e[0]||(e[0]=(...n)=>i.openIndexOptions&&i.openIndexOptions(...n))},[v(h(Object.keys(t.indexMap).includes(t.sortBy)?t.indexMap[t.sortBy]:"Name")+" ",1),t.showIndexOptions?D("",!0):(d(),c("div",Tt," expand_more ")),t.showIndexOptions?(d(),c("div",zt," expand_less ")):D("",!0)]),m(s("div",{ref:"indexDropdown",class:"options-container sortby-button",tabindex:"-1",onFocus:e[3]||(e[3]=(...n)=>i.indexFocus&&i.indexFocus(...n)),onFocusout:e[4]||(e[4]=(...n)=>i.indexFocusOut&&i.indexFocusOut(...n))},[s("div",Nt,[m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>t.sortBy=n),class:"radio-button",type:"radio",name:"index-select",value:null,id:"name",selected:t.sortBy==null},null,8,Vt),[[S,t.sortBy]]),Pt]),(d(),c(B,null,C(["qog","qod","qol"],n=>s("div",Rt,[m(s("input",{"onUpdate:modelValue":e[2]||(e[2]=p=>t.sortBy=p),class:"radio-button",type:"radio",name:"index-select",value:n,id:n,selected:n===t.sortBy},null,8,jt),[[S,t.sortBy]]),s("label",{class:"radio-label",for:n},h(t.indexMap[n]),9,Qt)])),64))],544),[[k,t.showIndexOptions]])]),Wt,s("div",Ht,[s("div",{class:"selected-option year-button",onClick:e[5]||(e[5]=(...n)=>i.openYearOptions&&i.openYearOptions(...n))},[v(h(t.selectedYear)+" ",1),t.showYearOptions?D("",!0):(d(),c("div",Ut," expand_more ")),t.showYearOptions?(d(),c("div",Kt," expand_less ")):D("",!0)]),m(s("div",{ref:"yearDropdown",class:"options-container year-button",tabindex:"-1",onFocus:e[7]||(e[7]=(...n)=>i.yearFocus&&i.yearFocus(...n)),onFocusout:e[8]||(e[8]=(...n)=>i.yearFocusOut&&i.yearFocusOut(...n))},[(d(!0),c(B,null,C(t.range(2e3,2020),n=>(d(),c("div",Jt,[m(s("input",{"onUpdate:modelValue":e[6]||(e[6]=p=>t.selectedYear=p),class:"radio-button",type:"radio",name:"year-select",value:n,id:n,selected:n===t.selectedYear},null,8,Xt),[[S,t.selectedYear]]),s("label",{class:"radio-label",for:n},h(n),9,Zt)]))),256))],544),[[k,t.showYearOptions]])])])]),te,s("div",ee,[s("div",oe,null,512)],512)])])}var se=G(It,[["render",ne],["__scopeId","data-v-5c624f90"]]);const ie={name:"MobileModal",props:{},data:function(){return{}},computed:{},mounted:function(){},methods:{hideModal:function(){this.$store.commit("setMobileModal",!1)}}},V=t=>(T("data-v-05590d9b"),t=t(),z(),t),ae=V(()=>s("section",{class:"modal-bg"},null,-1)),re={class:"modal-content pa4 f4"},le=V(()=>s("h1",{class:"modal-title"},"The 2022 Berggruen Governance Index is best experienced on a desktop device",-1)),de=V(()=>s("img",{src:st,alt:"Close"},null,-1)),ce=[de];function ue(t,e,a,u,r,i){return d(),c("section",{class:"modal",ref:"modal",tabindex:"0",onKeyup:e[2]||(e[2]=ft((...n)=>i.hideModal&&i.hideModal(...n),["esc"]))},[s("div",{class:"clickoutUnderlay",onClick:e[0]||(e[0]=(...n)=>i.hideModal&&i.hideModal(...n))}),ae,s("section",re,[le,s("button",{class:"close-modal-button",onClick:e[1]||(e[1]=(...n)=>i.hideModal&&i.hideModal(...n))},ce)])],544)}var pe=G(ie,[["render",ue],["__scopeId","data-v-05590d9b"]]);const fe={name:"LandingView",props:{},data:function(){return{stories:it.slice(0,2)}},components:{HeaderComponent:at,LandingDotPlot:se,AboutModal:rt,ExportModal:lt,MobileModal:pe},computed:{showAbout:function(){return this.$store.state.aboutModal},showExport:function(){return this.$store.state.exportModal},showMobile:function(){return this.$store.state.mobileModal}},mounted:function(){},methods:{}},J=t=>(T("data-v-40dd918a"),t=t(),z(),t),he={class:"content"},me={class:"page-content w-50 pv2 ph4 fl"},_e=J(()=>s("h2",{class:"landing-title f4"}," Explore the 2022 Berggruen Governance Index ",-1)),ye=J(()=>s("p",{class:"intro-graf f3"},[v(" The 2022 Berggruen Governance Index examines the varied performances of countries with a conceptual framework that incorporates democratic accountability (Quality of Democracy) and state capacity (Quality of Governance) as key factors of public goods provision (Quality of Life). Over the span of 20 years, the Index analyzes 134 countries across 3 main indices and 9 sub-indices to "),s("b",null," examine the relationship between Quality of Democracy, Quality of Government, and Quality of Life. ")],-1)),ve=v(" Start exploring "),ge={class:"story-chooser f4"},we={class:"story-name"},be={class:"story-description"},xe={ref:"globeSection",class:"globe-section w-50 fl flex flex-column items-center pa4"};function ke(t,e,a,u,r,i){const n=w("HeaderComponent"),p=w("AboutModal"),g=w("ExportModal"),b=w("MobileModal"),l=w("router-link"),E=w("LandingDotPlot");return d(),c("section",null,[y(n),m(y(p,{class:"about-modal"},null,512),[[k,i.showAbout]]),m(y(g,{class:"export-modal"},null,512),[[k,i.showExport]]),m(y(b,{class:"mobile-modal"},null,512),[[k,i.showMobile]]),s("section",he,[s("section",me,[_e,ye,y(l,{to:{name:"Explorer"},class:"explore-report-button db pv2 br2"},{default:U(()=>[ve]),_:1}),s("div",ge,[(d(!0),c(B,null,C(t.stories,(_,A)=>(d(),c("div",{key:_.name,class:"story db link ph4 pv1 mv2 br3"},[y(l,{to:{name:"Explorer",params:{story:A}}},{default:U(()=>[s("h2",we,h(_.name),1),s("p",be,h(_.description),1)]),_:2},1032,["to"])]))),128))])]),s("section",xe,[y(E)],512)])])}var De=G(fe,[["render",ke],["__scopeId","data-v-40dd918a"]]);export{De as default};
